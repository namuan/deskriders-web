<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="author" content="Deskriders.dev">
    <meta name="description" content="Improving developer productivity">
    <meta name="keywords" content="blog,developer">

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="EPUB to Conversational Audio: AI-Powered Podcast Generator"/>
<meta name="twitter:description" content="Convert EPUB files into engaging audio podcasts using AI. This script leverages MLX Qwen models for transcript generation and Kokoro Onnx TTS for natural voice synthesis, delivering captivating audio outputs effortlessly."/>

    <meta property="og:title" content="EPUB to Conversational Audio: AI-Powered Podcast Generator" />
<meta property="og:description" content="Convert EPUB files into engaging audio podcasts using AI. This script leverages MLX Qwen models for transcript generation and Kokoro Onnx TTS for natural voice synthesis, delivering captivating audio outputs effortlessly." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/1737196960-epub-to-audio-setup/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2025-01-18T10:42:41+00:00" />
<meta property="article:modified_time" content="2025-01-18T10:42:41+00:00" />



    
      <base href="/posts/1737196960-epub-to-audio-setup/">
    
    <title>
  EPUB to Conversational Audio: AI-Powered Podcast Generator · deskriders
</title>

    
      <link rel="canonical" href="/posts/1737196960-epub-to-audio-setup/">
    

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />

    
      
      
      <link rel="stylesheet" href="/css/coder.min.28d751104f30c16da1aa1bb04015cbe662cacfe0d1b01af4f2240ad58580069c.css" integrity="sha256-KNdREE8wwW2hqhuwQBXL5mLKz&#43;DRsBr08iQK1YWABpw=" crossorigin="anonymous" media="screen" />
    

    

    
      
        
        
        <link rel="stylesheet" href="/css/coder-dark.min.83a2010dac9f59f943b3004cd6c4f230507ad036da635d3621401d42ec4e2835.css" integrity="sha256-g6IBDayfWflDswBM1sTyMFB60DbaY102IUAdQuxOKDU=" crossorigin="anonymous" media="screen" />
      
    

    

    

    

    <link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

    <meta name="generator" content="Hugo 0.110.0">
  </head>

  
  
    
  
  <body class="colorscheme-auto">
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="/">
      deskriders
    </a>
    <input type="checkbox" id="menu-toggle" />
    <label class="menu-button float-right" for="menu-toggle"><i class="fas fa-bars"></i></label>
    <ul class="navigation-list">
      
        
          <li class="navigation-item">
            <a class="navigation-link" href="/posts/">Blog</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="/products">Products</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="/notes/">Notes</a>
          </li>
        
      
      
    </ul>
  </section>
</nav>


      <div class="content">
        
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">EPUB to Conversational Audio: AI-Powered Podcast Generator</h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fas fa-calendar"></i>
              <time datetime='2025-01-18T10:42:41Z'>
                January 18, 2025
              </time>
            </span>
            <span class="reading-time">
              <i class="fas fa-clock"></i>
              2 minutes read
            </span>
          </div>
          <div class="categories">
  <i class="fas fa-folder"></i>
    <a href="/categories/audio-processing/">Audio Processing</a>
      <span class="separator">•</span>
    <a href="/categories/ebook-conversion/">eBook Conversion</a>
      <span class="separator">•</span>
    <a href="/categories/text-to-speech/">Text-to-Speech</a></div>

          <div class="tags">
  <i class="fas fa-tag"></i>
    <a href="/tags/tts/">TTS</a>
      <span class="separator">•</span>
    <a href="/tags/podcast/">Podcast</a>
      <span class="separator">•</span>
    <a href="/tags/mlx/">MLX</a>
      <span class="separator">•</span>
    <a href="/tags/books/">Books</a></div>

        </div>
      </header>

      <div>
        <p>This script extracts text from an EPUB file, formats it, and converts it into an engaging audio podcast.
It uses AI-based transcript generation, rewriting, and text-to-speech synthesis to create a conversational and captivating audio output.</p>
<p>Here is the <a href="https://github.com/namuan/llm-playground/blob/main/epub-to-audio.py">source code</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>git clone https://github.com/namuan/llm-playground.git
</span></span></code></pre></div><h2 id="pre-requisites">Pre-Requisites:</h2>
<ul>
<li>MLX Qwen2.5 Models:
<ul>
<li>These will be downloaded when the script runs for the first time.</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>FIRST_PASS_LLM = &#34;mlx-community/Qwen2.5-14B-Instruct-4bit&#34;
</span></span><span style="display:flex;"><span>SECOND_PASS_LLM = &#34;mlx-community/Qwen2.5-7B-Instruct-4bit&#34;
</span></span></code></pre></div><p>Although you can configure a different MLX model if you already have it downloaded.</p>
<p>It uses multiple passes to generate a final transcript based on the architecture described <a href="https://github.com/meta-llama/llama-cookbook/tree/main/end-to-end-use-cases/NotebookLlama">here</a></p>
<ul>
<li>
<p>Kokoro Onnx Models:</p>
<ul>
<li>You will also need to download Kokoro Onnx TTS and voices from <a href="https://github.com/thewh1teagle/kokoro-onnx">https://github.com/thewh1teagle/kokoro-onnx</a></li>
<li>Or you can run the following wget commands.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>wget https://github.com/thewh1teagle/kokoro-onnx/releases/download/model-files/voices.json
</span></span><span style="display:flex;"><span>wget https://github.com/thewh1teagle/kokoro-onnx/releases/download/model-files/kokoro-v0_19.onnx
</span></span></code></pre></div></li>
</ul>
<p>Please keep note of the downloaded directory and update the <code># CONFIG</code> section of the script with the correct paths.
See <code>KOKORO_MODEL_VOICES_PATH</code> and <code>KOKORO_MODEL_PATH</code>.</p>
<p>You can also try changing the Speakers by using one of the voices listed here: <a href="https://github.com/thewh1teagle/kokoro-onnx?tab=readme-ov-file#voices">https://github.com/thewh1teagle/kokoro-onnx?tab=readme-ov-file#voices</a></p>
<p>Here is the complete config section from the script.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">### Config</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>OUTPUT_DIR <span style="color:#f92672">=</span> Path<span style="color:#f92672">.</span>cwd() <span style="color:#f92672">/</span> <span style="color:#e6db74">&#34;target&#34;</span> <span style="color:#f92672">/</span> <span style="color:#e6db74">&#34;epub_pods&#34;</span>
</span></span><span style="display:flex;"><span>OUTPUT_DIR<span style="color:#f92672">.</span>mkdir(exist_ok<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>KOKORO_MODEL_VOICES_PATH <span style="color:#f92672">=</span> Path<span style="color:#f92672">.</span>home() <span style="color:#f92672">/</span> <span style="color:#e6db74">&#34;models/onnx/kokoro/voices.json&#34;</span>
</span></span><span style="display:flex;"><span>KOKORO_MODEL_PATH <span style="color:#f92672">=</span> Path<span style="color:#f92672">.</span>home() <span style="color:#f92672">/</span> <span style="color:#e6db74">&#34;models/onnx/kokoro/kokoro-v0_19.onnx&#34;</span>
</span></span><span style="display:flex;"><span>kokoro <span style="color:#f92672">=</span> <span style="color:#66d9ef">None</span>  <span style="color:#75715e"># Lazy init</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>KOKORO_SPEAKER_1 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;bm_george&#34;</span>
</span></span><span style="display:flex;"><span>KOKORO_SPEAKER_2 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;af_sarah&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>SECOND_PASS_FILE_NAME <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;second_pass.pkl&#34;</span>
</span></span><span style="display:flex;"><span>INITIAL_PASS_FILE_NAME <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;initial_pass.pkl&#34;</span>
</span></span><span style="display:flex;"><span>FORMATTED_CHAPTER_FILE_NAME <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;formatted_chapter.txt&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>FIRST_PASS_LLM <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;mlx-community/Qwen2.5-14B-Instruct-4bit&#34;</span>
</span></span><span style="display:flex;"><span>SECOND_PASS_LLM <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;mlx-community/Qwen2.5-7B-Instruct-4bit&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">### CONFIG (END)</span>
</span></span></code></pre></div><p>Once everything is set up, you can run the script by providing the path to the ePub file.
Although I do recommend starting with just generated the formatted text to see if everything looks good.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>./epub-to-audio.py --text-only path/to/book.epub
</span></span></code></pre></div><p>Then next step, you can generate a subset of chapters to check the voices and output
This will only process the first 2 chapters of the book.
Keep an eye on the output it currently skips chapters with &lt; 3 lines.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>./epub-to-audio.py _path/to/book.epub -v --chapters <span style="color:#ae81ff">2</span>
</span></span></code></pre></div><p>All output is generated under <code>target/epub_pods/&lt;book-name&gt;</code> folder.</p>

      </div>

      <footer>
        


        
        
        
      </footer>
    </article>

    
  </section>

      </div>

      <footer class="footer">
  <section class="container">
    
    
      
        © 2019 - 2025
      
       Deskriders.dev 
    
    
       · 
      Powered by <a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>.
    
    
  </section>
</footer>

    </main>

    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-129728575-5', 'auto');
	
	ga('send', 'pageview');
}
</script>

  </body>

</html>
