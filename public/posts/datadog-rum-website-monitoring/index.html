<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="author" content="Deskriders.dev">
    <meta name="description" content="Improving developer productivity">
    <meta name="keywords" content="blog,developer">

    
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="DataDog RUM Integration for Website Monitoring: A Complete Guide">
  <meta name="twitter:description" content="Learn how to implement DataDog Real User Monitoring (RUM) for comprehensive website monitoring, including setup, configuration, dashboard creation, and best practices.">

    <meta property="og:url" content="/posts/datadog-rum-website-monitoring/">
  <meta property="og:site_name" content="deskriders">
  <meta property="og:title" content="DataDog RUM Integration for Website Monitoring: A Complete Guide">
  <meta property="og:description" content="Learn how to implement DataDog Real User Monitoring (RUM) for comprehensive website monitoring, including setup, configuration, dashboard creation, and best practices.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-11-24T21:11:42+00:00">
    <meta property="article:modified_time" content="2025-11-24T21:11:42+00:00">
    <meta property="article:tag" content="Datadog">
    <meta property="article:tag" content="Rum">
    <meta property="article:tag" content="Monitoring">
    <meta property="article:tag" content="Performance">
    <meta property="article:tag" content="Website">
    <meta property="article:tag" content="Frontend">


    
      <base href="/posts/datadog-rum-website-monitoring/">
    
    <title>
  DataDog RUM Integration for Website Monitoring: A Complete Guide · deskriders
</title>

    
      <link rel="canonical" href="/posts/datadog-rum-website-monitoring/">
    

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />

    
      
      
      <link rel="stylesheet" href="/css/coder.min.28d751104f30c16da1aa1bb04015cbe662cacfe0d1b01af4f2240ad58580069c.css" integrity="sha256-KNdREE8wwW2hqhuwQBXL5mLKz&#43;DRsBr08iQK1YWABpw=" crossorigin="anonymous" media="screen" />
    

    

    
      
        
        
        <link rel="stylesheet" href="/css/coder-dark.min.83a2010dac9f59f943b3004cd6c4f230507ad036da635d3621401d42ec4e2835.css" integrity="sha256-g6IBDayfWflDswBM1sTyMFB60DbaY102IUAdQuxOKDU=" crossorigin="anonymous" media="screen" />
      
    

    

    

    

    <link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

    <meta name="generator" content="Hugo 0.143.1">
  </head>

  
  
    
  
  <body class="colorscheme-auto">
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="/">
      deskriders
    </a>
    <input type="checkbox" id="menu-toggle" />
    <label class="menu-button float-right" for="menu-toggle"><i class="fas fa-bars"></i></label>
    <ul class="navigation-list">
      
        
          <li class="navigation-item">
            <a class="navigation-link" href="/posts/">Blog</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="/products">Products</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="/notes/">Notes</a>
          </li>
        
      
      
    </ul>
  </section>
</nav>


      <div class="content">
        
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">DataDog RUM Integration for Website Monitoring: A Complete Guide</h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fas fa-calendar"></i>
              <time datetime='2025-11-24T21:11:42Z'>
                November 24, 2025
              </time>
            </span>
            <span class="reading-time">
              <i class="fas fa-clock"></i>
              45 minutes read
            </span>
          </div>
          <div class="categories">
  <i class="fas fa-folder"></i>
    <a href="/categories/development/">development</a>
      <span class="separator">•</span>
    <a href="/categories/monitoring/">monitoring</a>
      <span class="separator">•</span>
    <a href="/categories/performance/">performance</a></div>

          <div class="tags">
  <i class="fas fa-tag"></i>
    <a href="/tags/datadog/">datadog</a>
      <span class="separator">•</span>
    <a href="/tags/rum/">rum</a>
      <span class="separator">•</span>
    <a href="/tags/monitoring/">monitoring</a>
      <span class="separator">•</span>
    <a href="/tags/performance/">performance</a>
      <span class="separator">•</span>
    <a href="/tags/website/">website</a>
      <span class="separator">•</span>
    <a href="/tags/frontend/">frontend</a></div>

        </div>
      </header>

      <div>
        <p><strong>Generated using LLM for reference purposes. Not reviewed and tested and may contain errors.</strong></p>
<h1 id="datadog-rum-integration-for-website-monitoring-a-complete-guide">DataDog RUM Integration for Website Monitoring: A Complete Guide</h1>
<p>DataDog Real User Monitoring (RUM) provides comprehensive insights into your website&rsquo;s performance and user experience by collecting real-time data from actual user interactions. This guide covers everything you need to know about implementing DataDog RUM for effective website monitoring.</p>
<h2 id="table-of-contents">Table of Contents</h2>
<ol>
<li><a href="#datadog-rum-overview">DataDog RUM Overview</a></li>
<li><a href="#datadog-rum-setup--configuration">DataDog RUM Setup &amp; Configuration</a></li>
<li><a href="#website-monitoring-with-datadog-rum">Website Monitoring with DataDog RUM</a></li>
<li><a href="#datadog-dashboard-creation">DataDog Dashboard Creation</a></li>
<li><a href="#implementation-examples">Implementation Examples</a></li>
<li><a href="#best-practices">Best Practices</a></li>
</ol>
<h2 id="datadog-rum-overview">DataDog RUM Overview</h2>
<h3 id="what-is-datadog-rum">What is DataDog RUM?</h3>
<p>DataDog Real User Monitoring (RUM) is a powerful tool that automatically collects performance and usage data from real user sessions on your website. It provides deep insights into:</p>
<ul>
<li><strong>Page Load Performance</strong>: Core Web Vitals, page load times, and resource loading</li>
<li><strong>User Interactions</strong>: Clicks, navigation patterns, and user flows</li>
<li><strong>Error Tracking</strong>: JavaScript errors, API failures, and resource loading issues</li>
<li><strong>API Performance</strong>: End-to-end API monitoring and response times</li>
<li><strong>User Sessions</strong>: Session replay and user behavior analytics</li>
</ul>
<h3 id="benefits-of-datadog-rum-vs-custom-solutions">Benefits of DataDog RUM vs Custom Solutions</h3>
<p><strong>Advantages of DataDog RUM:</strong></p>
<ol>
<li><strong>Zero Configuration Setup</strong>: Automatic collection of Core Web Vitals and performance metrics</li>
<li><strong>Advanced Analytics</strong>: Built-in correlation between frontend performance and backend services</li>
<li><strong>Scalability</strong>: Handles high-volume traffic without infrastructure management</li>
<li><strong>Integration Ecosystem</strong>: Seamless integration with APM, Infrastructure Monitoring, and Log Management</li>
<li><strong>Advanced Features</strong>: Session replay, synthetic monitoring, and anomaly detection</li>
<li><strong>Professional Support</strong>: 24/7 support and regular feature updates</li>
</ol>
<p><strong>Compared to Custom Solutions:</strong></p>
<ul>
<li>No need to build and maintain custom monitoring infrastructure</li>
<li>Reduced development time and ongoing maintenance costs</li>
<li>Access to advanced ML-powered anomaly detection</li>
<li>Built-in alerting and dashboard capabilities</li>
<li>Professional-grade security and compliance</li>
</ul>
<h3 id="key-metrics-available-in-datadog-rum">Key Metrics Available in DataDog RUM</h3>
<p>DataDog RUM automatically collects and provides insights into:</p>
<h4 id="core-web-vitals">Core Web Vitals</h4>
<ul>
<li><strong>Largest Contentful Paint (LCP)</strong>: Page loading performance</li>
<li><strong>First Input Delay (FID)</strong>: Page interactivity</li>
<li><strong>Cumulative Layout Shift (CLS)</strong>: Visual stability</li>
</ul>
<h4 id="performance-metrics">Performance Metrics</h4>
<ul>
<li><strong>Page Load Time</strong>: Total time to load and render pages</li>
<li><strong>Resource Loading</strong>: Individual resource performance (JS, CSS, images)</li>
<li><strong>API Response Times</strong>: End-to-end API performance</li>
<li><strong>DNS and Network Timing</strong>: Network-level performance metrics</li>
</ul>
<h4 id="user-experience-metrics">User Experience Metrics</h4>
<ul>
<li><strong>Session Duration</strong>: User engagement and session length</li>
<li><strong>Page Views</strong>: Traffic patterns and popular pages</li>
<li><strong>User Flows</strong>: Navigation patterns and conversion funnels</li>
<li><strong>Error Rates</strong>: JavaScript errors and failed requests</li>
</ul>
<h4 id="business-metrics">Business Metrics</h4>
<ul>
<li><strong>Conversion Tracking</strong>: Custom business event monitoring</li>
<li><strong>Feature Usage</strong>: User interaction with specific features</li>
<li><strong>Geographic Performance</strong>: Performance by user location</li>
</ul>
<h2 id="datadog-rum-setup--configuration">DataDog RUM Setup &amp; Configuration</h2>
<h3 id="datadog-browser-sdk-installation-and-setup">DataDog Browser SDK Installation and Setup</h3>
<h4 id="step-1-install-datadog-browser-sdk">Step 1: Install DataDog Browser SDK</h4>
<p><strong>Option A: NPM Installation</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>npm install @datadog/browser-rum @datadog/browser-core
</span></span></code></pre></div><p><strong>Option B: CDN Installation</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://www.datadoghq-browser-agent.com/datadog-rum.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
</span></span></code></pre></div><h4 id="step-2-initialize-datadog-rum">Step 2: Initialize DataDog RUM</h4>
<p><strong>Basic Initialization:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">datadogRum</span> } <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;@datadog/browser-rum&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">init</span>({
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">applicationId</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;YOUR_APPLICATION_ID&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">clientToken</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;YOUR_CLIENT_TOKEN&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">site</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;datadoghq.com&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">service</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;your-web-application&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">env</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;production&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">version</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;1.0.0&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">sessionSampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">100</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">sessionReplaySampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">20</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">trackUserInteractions</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">trackResources</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">trackLongTasks</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">defaultPrivacyLevel</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;mask-user-input&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">allowedTracingUrls</span><span style="color:#f92672">:</span> [
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;https://api.yourapp.com&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;https://api2.yourapp.com&#39;</span>
</span></span><span style="display:flex;"><span>    ]
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><p><strong>CDN Initialization:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>    (<span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">h</span>,<span style="color:#a6e22e">o</span>,<span style="color:#a6e22e">u</span>,<span style="color:#a6e22e">n</span>,<span style="color:#a6e22e">d</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">h</span><span style="color:#f92672">=</span><span style="color:#a6e22e">h</span>[<span style="color:#a6e22e">d</span>]<span style="color:#f92672">=</span><span style="color:#a6e22e">h</span>[<span style="color:#a6e22e">d</span>]<span style="color:#f92672">||</span>{<span style="color:#a6e22e">q</span><span style="color:#f92672">:</span>[],<span style="color:#a6e22e">onReady</span><span style="color:#f92672">:</span><span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">c</span>){<span style="color:#a6e22e">h</span>.<span style="color:#a6e22e">q</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">c</span>)}}
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">d</span><span style="color:#f92672">=</span><span style="color:#a6e22e">o</span>.<span style="color:#a6e22e">createElement</span>(<span style="color:#a6e22e">u</span>);<span style="color:#a6e22e">d</span>.<span style="color:#66d9ef">async</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>;<span style="color:#a6e22e">d</span>.<span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#a6e22e">n</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">n</span><span style="color:#f92672">=</span><span style="color:#a6e22e">o</span>.<span style="color:#a6e22e">getElementsByTagName</span>(<span style="color:#a6e22e">u</span>)[<span style="color:#ae81ff">0</span>];<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">parentNode</span>.<span style="color:#a6e22e">insertBefore</span>(<span style="color:#a6e22e">d</span>,<span style="color:#a6e22e">n</span>)
</span></span><span style="display:flex;"><span>    })(window,document,<span style="color:#e6db74">&#39;script&#39;</span>,<span style="color:#e6db74">&#39;https://www.datadoghq-browser-agent.com/datadog-rum.js&#39;</span>,<span style="color:#e6db74">&#39;DD_RUM&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">DD_RUM</span>.<span style="color:#a6e22e">onReady</span>(<span style="color:#66d9ef">function</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">DD_RUM</span>.<span style="color:#a6e22e">init</span>({
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">applicationId</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;YOUR_APPLICATION_ID&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">clientToken</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;YOUR_CLIENT_TOKEN&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">site</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;datadoghq.com&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">service</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;your-web-application&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">env</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;production&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">version</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;1.0.0&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">sessionSampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">100</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">sessionReplaySampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">20</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">trackUserInteractions</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">trackResources</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">trackLongTasks</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">defaultPrivacyLevel</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;mask-user-input&#39;</span>
</span></span><span style="display:flex;"><span>        })
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">script</span>&gt;
</span></span></code></pre></div><h3 id="rum-initialization-configuration">RUM Initialization Configuration</h3>
<h4 id="essential-configuration-options">Essential Configuration Options</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">init</span>({
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Required configuration
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">applicationId</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">clientToken</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;dd_client_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">site</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;datadoghq.com&#39;</span>, <span style="color:#75715e">// or &#39;datadoghq.eu&#39; for EU
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Application metadata
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">service</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;frontend-web-app&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">env</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;production&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">version</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;1.2.3&#39;</span>,
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Data collection settings
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">sessionSampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">100</span>,        <span style="color:#75715e">// Percentage of sessions to track (0-100)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">sessionReplaySampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">20</span>,   <span style="color:#75715e">// Percentage of sessions for replay (0-100)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Feature toggles
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">trackUserInteractions</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,   <span style="color:#75715e">// Track clicks, form inputs, taps
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">trackResources</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,          <span style="color:#75715e">// Track resource loading
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">trackLongTasks</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,          <span style="color:#75715e">// Track long running tasks
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">trackFrustrations</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,       <span style="color:#75715e">// Track user frustration signals
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Privacy settings
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">defaultPrivacyLevel</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;mask-user-input&#39;</span>, <span style="color:#75715e">// &#39;allow&#39;, &#39;mask&#39;, &#39;mask-user-input&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Tracing configuration
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">allowedTracingUrls</span><span style="color:#f92672">:</span> [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">match</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;https://api.yourapp.com&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">propagatorTypes</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;tracecontext&#39;</span>, <span style="color:#e6db74">&#39;datadog&#39;</span>]
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    ],
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Custom configuration
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">beforeSend</span><span style="color:#f92672">:</span> (<span style="color:#a6e22e">event</span>) =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Filter or modify events before sending
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">type</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;error&#39;</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">isTrusted</span> <span style="color:#f92672">===</span> <span style="color:#66d9ef">false</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>; <span style="color:#75715e">// Drop untrusted errors
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><h4 id="advanced-configuration-options">Advanced Configuration Options</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">init</span>({
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Performance monitoring
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">premiumSampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">10</span>,         <span style="color:#75715e">// Premium features sampling (0-100)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">enablePrivacyForActionName</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>, <span style="color:#75715e">// Hide PII in action names
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Custom context
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">context</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">userId</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">getCurrentUserId</span>(),
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">userRole</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">getCurrentUserRole</span>(),
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">accountType</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">getCurrentAccountType</span>()
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Error tracking
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">trackErrors</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">defaultErrorCode</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;UNKNOWN&#39;</span>,
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Resource tracking
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">resourceSampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">100</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">allowFallbackToLocalStorage</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Session management
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">sessionReplaySampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">20</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">replaySampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">20</span>,
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Feature flags
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">enableBeforeSendAfter</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">usePartitionedCrossSiteSessionCookie</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><h3 id="custom-metrics-and-attributes-configuration">Custom Metrics and Attributes Configuration</h3>
<h4 id="adding-custom-attributes">Adding Custom Attributes</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// Add global context (applies to all events)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">setGlobalContext</span>({
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">userId</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;user123&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">userRole</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;premium&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">campaign</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;black-friday-2023&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">featureFlags</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;new-checkout-flow&#39;</span>, <span style="color:#e6db74">&#39;beta-analytics&#39;</span>]
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Add user information
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">setUser</span>({
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;user123&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;John Doe&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">email</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;john.doe@example.com&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">plan</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;premium&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">organization</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Acme Corp&#39;</span>
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Add custom attributes to specific events
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addTiming</span>(<span style="color:#e6db74">&#39;custom_checkout_timing&#39;</span>);
</span></span></code></pre></div><h4 id="custom-metrics-collection">Custom Metrics Collection</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// Track custom timing metrics
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">trackCustomTiming</span>(<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">startTime</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">endTime</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">performance</span>.<span style="color:#a6e22e">now</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">duration</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">endTime</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">startTime</span>;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addTiming</span>(<span style="color:#a6e22e">name</span>);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Add custom attributes
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">setGlobalContextProperty</span>(<span style="color:#e6db74">&#39;custom_timing&#39;</span>, {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">name</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">duration</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">duration</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>()
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Track custom events
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">trackCustomEvent</span>(<span style="color:#a6e22e">eventName</span>, <span style="color:#a6e22e">eventData</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#a6e22e">eventName</span>, <span style="color:#a6e22e">eventData</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Example usage
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">checkoutStartTime</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">performance</span>.<span style="color:#a6e22e">now</span>();
</span></span><span style="display:flex;"><span><span style="color:#75715e">// ... checkout process ...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">trackCustomTiming</span>(<span style="color:#e6db74">&#39;checkout_completion&#39;</span>, <span style="color:#a6e22e">checkoutStartTime</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">trackCustomEvent</span>(<span style="color:#e6db74">&#39;feature_used&#39;</span>, {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">feature_name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;advanced_search&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">search_query</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;datadog monitoring&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">results_count</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">25</span>
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><h3 id="environment-setup-dev-staging-production">Environment Setup (Dev, Staging, Production)</h3>
<h4 id="environment-specific-configuration">Environment-Specific Configuration</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// Environment configuration
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">getRumConfig</span> <span style="color:#f92672">=</span> () =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">configs</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">development</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">applicationId</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;dev-app-id&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">clientToken</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;dev-client-token&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">env</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;development&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">sessionSampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">100</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">sessionReplaySampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">100</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">trackErrors</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">debug</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">staging</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">applicationId</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;staging-app-id&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">clientToken</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;staging-client-token&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">env</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;staging&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">sessionSampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">50</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">sessionReplaySampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">10</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">trackErrors</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">debug</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">production</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">applicationId</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;prod-app-id&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">clientToken</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;prod-client-token&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">env</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;production&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">sessionSampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">20</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">sessionReplaySampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">5</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">trackErrors</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">debug</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">configs</span>[<span style="color:#a6e22e">process</span>.<span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">NODE_ENV</span>] <span style="color:#f92672">||</span> <span style="color:#a6e22e">configs</span>.<span style="color:#a6e22e">development</span>;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Initialize based on environment
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">rumConfig</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">getRumConfig</span>();
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">init</span>(<span style="color:#a6e22e">rumConfig</span>);
</span></span></code></pre></div><h4 id="environment-detection-and-auto-configuration">Environment Detection and Auto-Configuration</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// Automatic environment detection
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">detectEnvironment</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">hostname</span> <span style="color:#f92672">=</span> window.<span style="color:#a6e22e">location</span>.<span style="color:#a6e22e">hostname</span>;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">hostname</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#e6db74">&#39;localhost&#39;</span>) <span style="color:#f92672">||</span> <span style="color:#a6e22e">hostname</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#e6db74">&#39;127.0.0.1&#39;</span>)) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;development&#39;</span>;
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">hostname</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#e6db74">&#39;staging&#39;</span>) <span style="color:#f92672">||</span> <span style="color:#a6e22e">hostname</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#e6db74">&#39;test&#39;</span>)) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;staging&#39;</span>;
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;production&#39;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Dynamic configuration loading
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">loadRumConfiguration</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">environment</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">detectEnvironment</span>();
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">response</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">fetch</span>(<span style="color:#e6db74">`/config/rum-</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">environment</span><span style="color:#e6db74">}</span><span style="color:#e6db74">.json`</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">config</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">json</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">config</span>;
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">error</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">warn</span>(<span style="color:#e6db74">&#39;Failed to load RUM config, using defaults:&#39;</span>, <span style="color:#a6e22e">error</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">getRumConfig</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Initialize with dynamic configuration
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">loadRumConfiguration</span>().<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">rumConfig</span> =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">init</span>(<span style="color:#a6e22e">rumConfig</span>);
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><h2 id="website-monitoring-with-datadog-rum">Website Monitoring with DataDog RUM</h2>
<h3 id="page-load-performance-monitoring-core-web-vitals">Page Load Performance Monitoring (Core Web Vitals)</h3>
<h4 id="automatic-core-web-vitals-collection">Automatic Core Web Vitals Collection</h4>
<p>DataDog RUM automatically collects and reports on all Core Web Vitals:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// DataDog automatically tracks:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// - Largest Contentful Paint (LCP)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// - First Input Delay (FID) 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// - Cumulative Layout Shift (CLS)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// View performance in DataDog dashboard:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// - Performance &gt; Core Web Vitals
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// - Filter by service, environment, or custom tags
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Custom performance monitoring
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">onReady</span>(() =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Get current performance metrics
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">performance</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">getInternalContext</span>();
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Current session ID:&#39;</span>, <span style="color:#a6e22e">performance</span>.<span style="color:#a6e22e">sessionId</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;View ID:&#39;</span>, <span style="color:#a6e22e">performance</span>.<span style="color:#a6e22e">view</span>.<span style="color:#a6e22e">id</span>);
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><h4 id="custom-performance-metrics">Custom Performance Metrics</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// Track custom performance metrics
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">trackPagePerformance</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Measure Time to Interactive (TTI)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">measureTTI</span> <span style="color:#f92672">=</span> () =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">observer</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">PerformanceObserver</span>((<span style="color:#a6e22e">list</span>) =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">entry</span> <span style="color:#66d9ef">of</span> <span style="color:#a6e22e">list</span>.<span style="color:#a6e22e">getEntries</span>()) {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">entryType</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;first-input&#39;</span>) {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">&#39;time_to_interactive&#39;</span>, {
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">duration</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">startTime</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;performance&#39;</span>
</span></span><span style="display:flex;"><span>                    });
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">observer</span>.<span style="color:#a6e22e">disconnect</span>();
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">observer</span>.<span style="color:#a6e22e">observe</span>({ <span style="color:#a6e22e">entryTypes</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;first-input&#39;</span>] });
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Measure Time to First Byte (TTFB)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">measureTTFB</span> <span style="color:#f92672">=</span> () =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">navigation</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">performance</span>.<span style="color:#a6e22e">getEntriesByType</span>(<span style="color:#e6db74">&#39;navigation&#39;</span>)[<span style="color:#ae81ff">0</span>];
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">navigation</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">&#39;time_to_first_byte&#39;</span>, {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">duration</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">navigation</span>.<span style="color:#a6e22e">responseStart</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">navigation</span>.<span style="color:#a6e22e">requestStart</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;performance&#39;</span>
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Measure Custom Metrics
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">measureCustomMetrics</span> <span style="color:#f92672">=</span> () =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Custom loading phases
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">phases</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;app_loaded&#39;</span><span style="color:#f92672">:</span> () =&gt; window.<span style="color:#a6e22e">appLoaded</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;data_fetched&#39;</span><span style="color:#f92672">:</span> () =&gt; window.<span style="color:#a6e22e">dataFetched</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;ui_ready&#39;</span><span style="color:#f92672">:</span> () =&gt; window.<span style="color:#a6e22e">uiReady</span>
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        Object.<span style="color:#a6e22e">entries</span>(<span style="color:#a6e22e">phases</span>).<span style="color:#a6e22e">forEach</span>(([<span style="color:#a6e22e">phase</span>, <span style="color:#a6e22e">checkFn</span>]) =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">startTime</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">performance</span>.<span style="color:#a6e22e">now</span>();
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">checkInterval</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">setInterval</span>(() =&gt; {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">checkFn</span>()) {
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">duration</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">performance</span>.<span style="color:#a6e22e">now</span>() <span style="color:#f92672">-</span> <span style="color:#a6e22e">startTime</span>;
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">`phase_</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">phase</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>, {
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">duration</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">duration</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;custom_performance&#39;</span>
</span></span><span style="display:flex;"><span>                    });
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">clearInterval</span>(<span style="color:#a6e22e">checkInterval</span>);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }, <span style="color:#ae81ff">100</span>);
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">measureTTI</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">measureTTFB</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">measureCustomMetrics</span>();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Initialize performance tracking
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">trackPagePerformance</span>();
</span></span></code></pre></div><h4 id="performance-budget-monitoring">Performance Budget Monitoring</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// Set up performance budgets
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">performanceBudgets</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">lcp</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2500</span>,      <span style="color:#75715e">// 2.5 seconds
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">fid</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">100</span>,       <span style="color:#75715e">// 100ms
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">cls</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0.1</span>,       <span style="color:#75715e">// 0.1
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">ttfb</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">500</span>,      <span style="color:#75715e">// 500ms
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">custom_load</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">3000</span> <span style="color:#75715e">// 3 seconds
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">checkPerformanceBudgets</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Monitor LCP budget
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">lcpObserver</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">PerformanceObserver</span>((<span style="color:#a6e22e">list</span>) =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">entries</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">list</span>.<span style="color:#a6e22e">getEntries</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">lastEntry</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">entries</span>[<span style="color:#a6e22e">entries</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>];
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">lastEntry</span>.<span style="color:#a6e22e">startTime</span> <span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">performanceBudgets</span>.<span style="color:#a6e22e">lcp</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addError</span>(<span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">&#39;LCP budget exceeded&#39;</span>), {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">budget</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;lcp&#39;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">actual</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">lastEntry</span>.<span style="color:#a6e22e">startTime</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">limit</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">performanceBudgets</span>.<span style="color:#a6e22e">lcp</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">severity</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;warning&#39;</span>
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">lcpObserver</span>.<span style="color:#a6e22e">observe</span>({ <span style="color:#a6e22e">entryTypes</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;largest-contentful-paint&#39;</span>] });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Monitor FID budget
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">fidObserver</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">PerformanceObserver</span>((<span style="color:#a6e22e">list</span>) =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">list</span>.<span style="color:#a6e22e">getEntries</span>().<span style="color:#a6e22e">forEach</span>((<span style="color:#a6e22e">entry</span>) =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> ((<span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">processingStart</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">startTime</span>) <span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">performanceBudgets</span>.<span style="color:#a6e22e">fid</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addError</span>(<span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">&#39;FID budget exceeded&#39;</span>), {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">budget</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;fid&#39;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">actual</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">processingStart</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">startTime</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">limit</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">performanceBudgets</span>.<span style="color:#a6e22e">fid</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">severity</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;warning&#39;</span>
</span></span><span style="display:flex;"><span>                });
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">fidObserver</span>.<span style="color:#a6e22e">observe</span>({ <span style="color:#a6e22e">entryTypes</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;first-input&#39;</span>] });
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">checkPerformanceBudgets</span>();
</span></span></code></pre></div><h3 id="api-endpoint-monitoring-and-error-tracking">API Endpoint Monitoring and Error Tracking</h3>
<h4 id="automatic-api-monitoring">Automatic API Monitoring</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// DataDog automatically tracks all XHR and fetch requests
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Configure tracing for your API endpoints
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">init</span>({
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// ... other config ...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">allowedTracingUrls</span><span style="color:#f92672">:</span> [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">match</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;https://api.yourapp.com&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">propagatorTypes</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;tracecontext&#39;</span>, <span style="color:#e6db74">&#39;datadog&#39;</span>]
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">match</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;https://internal-api.yourapp.com&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">propagatorTypes</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;datadog&#39;</span>]
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    ],
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">traceSampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">100</span>
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Track custom API metrics
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">trackApiCall</span>(<span style="color:#a6e22e">endpoint</span>, <span style="color:#a6e22e">method</span>, <span style="color:#a6e22e">startTime</span>, <span style="color:#a6e22e">response</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">duration</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">performance</span>.<span style="color:#a6e22e">now</span>() <span style="color:#f92672">-</span> <span style="color:#a6e22e">startTime</span>;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">&#39;api_call&#39;</span>, {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">endpoint</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">endpoint</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">method</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">method</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">status</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">status</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">duration</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">duration</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">success</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">ok</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">size</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">headers</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;content-length&#39;</span>) <span style="color:#f92672">||</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Track errors
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">ok</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addError</span>(<span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">`API Error: </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">status</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>), {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">endpoint</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">endpoint</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">method</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">method</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">status</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">status</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">duration</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">duration</span>
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Enhanced fetch wrapper
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">originalFetch</span> <span style="color:#f92672">=</span> window.<span style="color:#a6e22e">fetch</span>;
</span></span><span style="display:flex;"><span>window.<span style="color:#a6e22e">fetch</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">url</span>, <span style="color:#a6e22e">options</span> <span style="color:#f92672">=</span> {}) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">startTime</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">performance</span>.<span style="color:#a6e22e">now</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">method</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">options</span>.<span style="color:#a6e22e">method</span> <span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;GET&#39;</span>;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">response</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">originalFetch</span>.<span style="color:#a6e22e">apply</span>(<span style="color:#66d9ef">this</span>, <span style="color:#a6e22e">arguments</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">trackApiCall</span>(<span style="color:#a6e22e">url</span>, <span style="color:#a6e22e">method</span>, <span style="color:#a6e22e">startTime</span>, <span style="color:#a6e22e">response</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">response</span>;
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">error</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">trackApiCall</span>(<span style="color:#a6e22e">url</span>, <span style="color:#a6e22e">method</span>, <span style="color:#a6e22e">startTime</span>, { <span style="color:#a6e22e">ok</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>, <span style="color:#a6e22e">status</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span> });
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">throw</span> <span style="color:#a6e22e">error</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h4 id="custom-api-error-tracking">Custom API Error Tracking</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// Comprehensive API error tracking
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ApiErrorTracker</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">constructor</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">errorCounts</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Map</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">lastErrorTime</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Map</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">rateLimitWindow</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">60000</span>; <span style="color:#75715e">// 1 minute
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">trackApiError</span>(<span style="color:#a6e22e">error</span>, <span style="color:#a6e22e">endpoint</span>, <span style="color:#a6e22e">method</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">key</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">endpoint</span><span style="color:#e6db74">}</span><span style="color:#e6db74">:</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">method</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">now</span> <span style="color:#f92672">=</span> Date.<span style="color:#a6e22e">now</span>();
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Update error counts
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">errorCounts</span>.<span style="color:#a6e22e">has</span>(<span style="color:#a6e22e">key</span>)) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">errorCounts</span>.<span style="color:#a6e22e">set</span>(<span style="color:#a6e22e">key</span>, []);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">errors</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">errorCounts</span>.<span style="color:#a6e22e">get</span>(<span style="color:#a6e22e">key</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">errors</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">now</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Clean old errors outside window
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">recentErrors</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">errors</span>.<span style="color:#a6e22e">filter</span>(<span style="color:#a6e22e">time</span> =&gt; <span style="color:#a6e22e">now</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">time</span> <span style="color:#f92672">&lt;</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">rateLimitWindow</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">errorCounts</span>.<span style="color:#a6e22e">set</span>(<span style="color:#a6e22e">key</span>, <span style="color:#a6e22e">recentErrors</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Track in DataDog
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addError</span>(<span style="color:#a6e22e">error</span>, {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">endpoint</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">endpoint</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">method</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">method</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">error_count</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">recentErrors</span>.<span style="color:#a6e22e">length</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">error_type</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">categorizeError</span>(<span style="color:#a6e22e">error</span>),
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">now</span>
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Alert on high error rates
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">recentErrors</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">5</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">sendAlert</span>(<span style="color:#a6e22e">key</span>, <span style="color:#a6e22e">recentErrors</span>.<span style="color:#a6e22e">length</span>, <span style="color:#a6e22e">endpoint</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">categorizeError</span>(<span style="color:#a6e22e">error</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">name</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;TypeError&#39;</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">message</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#e6db74">&#39;fetch&#39;</span>)) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;network_error&#39;</span>;
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">message</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#e6db74">&#39;4&#39;</span>)) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;client_error&#39;</span>;
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">message</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#e6db74">&#39;5&#39;</span>)) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;server_error&#39;</span>;
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;unknown_error&#39;</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">sendAlert</span>(<span style="color:#a6e22e">key</span>, <span style="color:#a6e22e">count</span>, <span style="color:#a6e22e">endpoint</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">lastAlert</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">lastErrorTime</span>.<span style="color:#a6e22e">get</span>(<span style="color:#a6e22e">key</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">now</span> <span style="color:#f92672">=</span> Date.<span style="color:#a6e22e">now</span>();
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Rate limit alerts to once per 5 minutes
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">lastAlert</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">now</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">lastAlert</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">300000</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addError</span>(<span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">`High error rate detected: </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">count</span><span style="color:#e6db74">}</span><span style="color:#e6db74"> errors in 1 minute`</span>), {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">alert_type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;high_error_rate&#39;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">endpoint</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">endpoint</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">error_count</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">count</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">severity</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;critical&#39;</span>
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">lastErrorTime</span>.<span style="color:#a6e22e">set</span>(<span style="color:#a6e22e">key</span>, <span style="color:#a6e22e">now</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Initialize API error tracking
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">apiErrorTracker</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">ApiErrorTracker</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Track fetch errors
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>window.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;unhandledrejection&#39;</span>, (<span style="color:#a6e22e">event</span>) =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">reason</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">reason</span>.<span style="color:#a6e22e">url</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">apiErrorTracker</span>.<span style="color:#a6e22e">trackApiError</span>(
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">reason</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">reason</span>.<span style="color:#a6e22e">url</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">reason</span>.<span style="color:#a6e22e">config</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">method</span> <span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;GET&#39;</span>
</span></span><span style="display:flex;"><span>        );
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><h3 id="resource-loading-performance">Resource Loading Performance</h3>
<h4 id="resource-monitoring">Resource Monitoring</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// Monitor resource loading performance
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ResourceMonitor</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">constructor</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">resourceTimings</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Map</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">setupResourceObserver</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">setupResourceObserver</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">observer</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">PerformanceObserver</span>((<span style="color:#a6e22e">list</span>) =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">entries</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">list</span>.<span style="color:#a6e22e">getEntries</span>();
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">entries</span>.<span style="color:#a6e22e">forEach</span>((<span style="color:#a6e22e">entry</span>) =&gt; {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">initiatorType</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">duration</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">analyzeResource</span>(<span style="color:#a6e22e">entry</span>);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">observer</span>.<span style="color:#a6e22e">observe</span>({ <span style="color:#a6e22e">entryTypes</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;resource&#39;</span>] });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">analyzeResource</span>(<span style="color:#a6e22e">entry</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">resourceData</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">name</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">initiatorType</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">duration</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">duration</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">transferSize</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">transferSize</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">encodedBodySize</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">encodedBodySize</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">decodedBodySize</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">decodedBodySize</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">startTime</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">startTime</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>()
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Track in DataDog
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">&#39;resource_load&#39;</span>, <span style="color:#a6e22e">resourceData</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Check for slow resources
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">duration</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1000</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addError</span>(<span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">`Slow resource: </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">name</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>), {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">resource_name</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">name</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">resource_type</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">initiatorType</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">duration</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">duration</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">threshold</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1000</span>
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Track critical resources separately
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">isCriticalResource</span>(<span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">name</span>)) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">&#39;critical_resource_load&#39;</span>, {
</span></span><span style="display:flex;"><span>                ...<span style="color:#a6e22e">resourceData</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">is_critical</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">isCriticalResource</span>(<span style="color:#a6e22e">url</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">criticalPatterns</span> <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">/\.css$/</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">/\.js$/</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">/critical/</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">/bundle/</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">/main/</span>
</span></span><span style="display:flex;"><span>        ];
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">criticalPatterns</span>.<span style="color:#a6e22e">some</span>(<span style="color:#a6e22e">pattern</span> =&gt; <span style="color:#a6e22e">pattern</span>.<span style="color:#a6e22e">test</span>(<span style="color:#a6e22e">url</span>));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">getResourceSummary</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">summary</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">total</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">byType</span><span style="color:#f92672">:</span> {},
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">slowResources</span><span style="color:#f92672">:</span> [],
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">totalLoadTime</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Get all resource entries
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">resources</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">performance</span>.<span style="color:#a6e22e">getEntriesByType</span>(<span style="color:#e6db74">&#39;resource&#39;</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">resources</span>.<span style="color:#a6e22e">forEach</span>(<span style="color:#a6e22e">resource</span> =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">summary</span>.<span style="color:#a6e22e">total</span><span style="color:#f92672">++</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">summary</span>.<span style="color:#a6e22e">totalLoadTime</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">resource</span>.<span style="color:#a6e22e">duration</span>;
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">summary</span>.<span style="color:#a6e22e">byType</span>[<span style="color:#a6e22e">resource</span>.<span style="color:#a6e22e">initiatorType</span>]) {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">summary</span>.<span style="color:#a6e22e">byType</span>[<span style="color:#a6e22e">resource</span>.<span style="color:#a6e22e">initiatorType</span>] <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">count</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">totalDuration</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">averageDuration</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>                };
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">summary</span>.<span style="color:#a6e22e">byType</span>[<span style="color:#a6e22e">resource</span>.<span style="color:#a6e22e">initiatorType</span>].<span style="color:#a6e22e">count</span><span style="color:#f92672">++</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">summary</span>.<span style="color:#a6e22e">byType</span>[<span style="color:#a6e22e">resource</span>.<span style="color:#a6e22e">initiatorType</span>].<span style="color:#a6e22e">totalDuration</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">resource</span>.<span style="color:#a6e22e">duration</span>;
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">resource</span>.<span style="color:#a6e22e">duration</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1000</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">summary</span>.<span style="color:#a6e22e">slowResources</span>.<span style="color:#a6e22e">push</span>({
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">resource</span>.<span style="color:#a6e22e">name</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">duration</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">resource</span>.<span style="color:#a6e22e">duration</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">resource</span>.<span style="color:#a6e22e">initiatorType</span>
</span></span><span style="display:flex;"><span>                });
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Calculate averages
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Object.<span style="color:#a6e22e">values</span>(<span style="color:#a6e22e">summary</span>.<span style="color:#a6e22e">byType</span>).<span style="color:#a6e22e">forEach</span>(<span style="color:#a6e22e">type</span> =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">type</span>.<span style="color:#a6e22e">averageDuration</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">type</span>.<span style="color:#a6e22e">totalDuration</span> <span style="color:#f92672">/</span> <span style="color:#a6e22e">type</span>.<span style="color:#a6e22e">count</span>;
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">summary</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Initialize resource monitoring
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">resourceMonitor</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">ResourceMonitor</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Track resource summary periodically
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">setInterval</span>(() =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">summary</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">resourceMonitor</span>.<span style="color:#a6e22e">getResourceSummary</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">&#39;resource_summary&#39;</span>, <span style="color:#a6e22e">summary</span>);
</span></span><span style="display:flex;"><span>}, <span style="color:#ae81ff">30000</span>); <span style="color:#75715e">// Every 30 seconds
</span></span></span></code></pre></div><h3 id="user-session-replay-and-analytics">User Session Replay and Analytics</h3>
<h4 id="session-replay-configuration">Session Replay Configuration</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// Configure session replay
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">init</span>({
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// ... other config ...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">sessionReplaySampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">20</span>,    <span style="color:#75715e">// 20% of sessions
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">trackUserInteractions</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,    <span style="color:#75715e">// Track clicks, inputs, taps
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">trackFrustrations</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,        <span style="color:#75715e">// Track rage clicks, dead clicks
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">defaultPrivacyLevel</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;mask-user-input&#39;</span>, <span style="color:#75715e">// Mask sensitive input
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">enablePrivacyForActionName</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>, <span style="color:#75715e">// Hide PII in action names
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">trackResources</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">trackLongTasks</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Add session context
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">setUser</span>({
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">getCurrentUserId</span>(),
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">getCurrentUserName</span>(),
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">email</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">getCurrentUserEmail</span>(),
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">role</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">getCurrentUserRole</span>(),
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">account_id</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">getCurrentAccountId</span>()
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Track custom session events
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">trackUserJourney</span>(<span style="color:#a6e22e">step</span>, <span style="color:#a6e22e">data</span> <span style="color:#f92672">=</span> {}) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">`user_journey_</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">step</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>, {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">journey_step</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">step</span>,
</span></span><span style="display:flex;"><span>        ...<span style="color:#a6e22e">data</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>()
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Example usage in user flows
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">trackCheckoutFlow</span>(<span style="color:#a6e22e">step</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">journeyData</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">step</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">step</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">cart_value</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">getCurrentCartValue</span>(),
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">items_count</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">getCartItemCount</span>(),
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">payment_method</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">getSelectedPaymentMethod</span>()
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">trackUserJourney</span>(<span style="color:#e6db74">&#39;checkout&#39;</span>, <span style="color:#a6e22e">journeyData</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Track feature adoption
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">trackFeatureAdoption</span>(<span style="color:#a6e22e">featureName</span>, <span style="color:#a6e22e">context</span> <span style="color:#f92672">=</span> {}) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">&#39;feature_adoption&#39;</span>, {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">feature_name</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">featureName</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">adoption_type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;first_use&#39;</span>,
</span></span><span style="display:flex;"><span>        ...<span style="color:#a6e22e">context</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>()
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="error-tracking-and-debugging">Error Tracking and Debugging</h3>
<h4 id="comprehensive-error-tracking">Comprehensive Error Tracking</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// Enhanced error tracking setup
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">EnhancedErrorTracker</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">constructor</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">setupGlobalErrorHandlers</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">setupUnhandledRejectionHandler</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">setupResourceErrorHandler</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">errorCounts</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Map</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">setupGlobalErrorHandlers</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// JavaScript errors
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        window.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;error&#39;</span>, (<span style="color:#a6e22e">event</span>) =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">trackError</span>({
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;javascript&#39;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">message</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">filename</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">filename</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">lineno</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">lineno</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">colno</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">colno</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">error</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">error</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>(),
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">userAgent</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">navigator</span>.<span style="color:#a6e22e">userAgent</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">url</span><span style="color:#f92672">:</span> window.<span style="color:#a6e22e">location</span>.<span style="color:#a6e22e">href</span>
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">setupUnhandledRejectionHandler</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Unhandled promise rejections
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        window.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;unhandledrejection&#39;</span>, (<span style="color:#a6e22e">event</span>) =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">trackError</span>({
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;promise&#39;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">reason</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">message</span> <span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;Unhandled Promise Rejection&#39;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">reason</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">reason</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">stack</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">reason</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">stack</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>(),
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">userAgent</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">navigator</span>.<span style="color:#a6e22e">userAgent</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">url</span><span style="color:#f92672">:</span> window.<span style="color:#a6e22e">location</span>.<span style="color:#a6e22e">href</span>
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">setupResourceErrorHandler</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Resource loading errors
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        window.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;error&#39;</span>, (<span style="color:#a6e22e">event</span>) =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">target</span> <span style="color:#f92672">&amp;&amp;</span> (<span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">target</span>.<span style="color:#a6e22e">tagName</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;SCRIPT&#39;</span> <span style="color:#f92672">||</span> 
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">target</span>.<span style="color:#a6e22e">tagName</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;LINK&#39;</span> <span style="color:#f92672">||</span> 
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">target</span>.<span style="color:#a6e22e">tagName</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;IMG&#39;</span> <span style="color:#f92672">||</span>
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">target</span>.<span style="color:#a6e22e">tagName</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;LINK&#39;</span>)) {
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">trackError</span>({
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;resource&#39;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">message</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">target</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">target</span>.<span style="color:#a6e22e">tagName</span>.<span style="color:#a6e22e">toLowerCase</span>(),
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">src</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">target</span>.<span style="color:#a6e22e">src</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">target</span>.<span style="color:#a6e22e">href</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>(),
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">url</span><span style="color:#f92672">:</span> window.<span style="color:#a6e22e">location</span>.<span style="color:#a6e22e">href</span>
</span></span><span style="display:flex;"><span>                });
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }, <span style="color:#66d9ef">true</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">trackError</span>(<span style="color:#a6e22e">errorData</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Add error ID and categorize
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">id</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">generateErrorId</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">category</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">categorizeError</span>(<span style="color:#a6e22e">errorData</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">severity</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">calculateSeverity</span>(<span style="color:#a6e22e">errorData</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Count errors for rate limiting
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">errorKey</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">type</span><span style="color:#e6db74">}</span><span style="color:#e6db74">:</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">category</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">count</span> <span style="color:#f92672">=</span> (<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">errorCounts</span>.<span style="color:#a6e22e">get</span>(<span style="color:#a6e22e">errorKey</span>) <span style="color:#f92672">||</span> <span style="color:#ae81ff">0</span>) <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">errorCounts</span>.<span style="color:#a6e22e">set</span>(<span style="color:#a6e22e">errorKey</span>, <span style="color:#a6e22e">count</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Add to DataDog
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addError</span>(
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">type</span><span style="color:#e6db74">}</span><span style="color:#e6db74">: </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">message</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>),
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                ...<span style="color:#a6e22e">errorData</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">error_count</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">count</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">user_session</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">getInternalContext</span>()<span style="color:#f92672">?</span>.<span style="color:#a6e22e">sessionId</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">page_url</span><span style="color:#f92672">:</span> window.<span style="color:#a6e22e">location</span>.<span style="color:#a6e22e">pathname</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">user_agent</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">navigator</span>.<span style="color:#a6e22e">userAgent</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>()
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        );
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Log for development
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">process</span>.<span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">NODE_ENV</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;development&#39;</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#e6db74">&#39;Enhanced error tracked:&#39;</span>, <span style="color:#a6e22e">errorData</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">categorizeError</span>(<span style="color:#a6e22e">errorData</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">type</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;javascript&#39;</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">message</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#e6db74">&#39;NetworkError&#39;</span>) <span style="color:#f92672">||</span> 
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">message</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#e6db74">&#39;fetch&#39;</span>)) {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;network&#39;</span>;
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">message</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#e6db74">&#39;ReferenceError&#39;</span>)) {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;reference&#39;</span>;
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">message</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#e6db74">&#39;TypeError&#39;</span>)) {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;type&#39;</span>;
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;general&#39;</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">type</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;resource&#39;</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">target</span> <span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;unknown&#39;</span>;
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">type</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;promise&#39;</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;async&#39;</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;unknown&#39;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">calculateSeverity</span>(<span style="color:#a6e22e">errorData</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Calculate error severity based on type and context
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">type</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;javascript&#39;</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">category</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;network&#39;</span>) <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;high&#39;</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">category</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;reference&#39;</span>) <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;medium&#39;</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;low&#39;</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;medium&#39;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">generateErrorId</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">`err_</span><span style="color:#e6db74">${</span>Date.<span style="color:#a6e22e">now</span>()<span style="color:#e6db74">}</span><span style="color:#e6db74">_</span><span style="color:#e6db74">${</span>Math.<span style="color:#a6e22e">random</span>().<span style="color:#a6e22e">toString</span>(<span style="color:#ae81ff">36</span>).<span style="color:#a6e22e">substr</span>(<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">9</span>)<span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">getErrorSummary</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">summary</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">totalErrors</span><span style="color:#f92672">:</span> Array.<span style="color:#a6e22e">from</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">errorCounts</span>.<span style="color:#a6e22e">values</span>()).<span style="color:#a6e22e">reduce</span>((<span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">b</span>) =&gt; <span style="color:#a6e22e">a</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">b</span>, <span style="color:#ae81ff">0</span>),
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">byCategory</span><span style="color:#f92672">:</span> {},
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">recentErrors</span><span style="color:#f92672">:</span> [],
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">trends</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">analyzeErrorTrends</span>()
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">errorCounts</span>.<span style="color:#a6e22e">forEach</span>((<span style="color:#a6e22e">count</span>, <span style="color:#a6e22e">key</span>) =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> [<span style="color:#a6e22e">type</span>, <span style="color:#a6e22e">category</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">key</span>.<span style="color:#a6e22e">split</span>(<span style="color:#e6db74">&#39;:&#39;</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">summary</span>.<span style="color:#a6e22e">byCategory</span>[<span style="color:#a6e22e">type</span>]) {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">summary</span>.<span style="color:#a6e22e">byCategory</span>[<span style="color:#a6e22e">type</span>] <span style="color:#f92672">=</span> {};
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">summary</span>.<span style="color:#a6e22e">byCategory</span>[<span style="color:#a6e22e">type</span>][<span style="color:#a6e22e">category</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">count</span>;
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">summary</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">analyzeErrorTrends</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Analyze error patterns over time
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">totalErrors</span><span style="color:#f92672">:</span> Array.<span style="color:#a6e22e">from</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">errorCounts</span>.<span style="color:#a6e22e">values</span>()).<span style="color:#a6e22e">reduce</span>((<span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">b</span>) =&gt; <span style="color:#a6e22e">a</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">b</span>, <span style="color:#ae81ff">0</span>),
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">mostCommon</span><span style="color:#f92672">:</span> Array.<span style="color:#a6e22e">from</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">errorCounts</span>.<span style="color:#a6e22e">entries</span>())
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">sort</span>((<span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">b</span>) =&gt; <span style="color:#a6e22e">b</span>[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">-</span> <span style="color:#a6e22e">a</span>[<span style="color:#ae81ff">1</span>])[<span style="color:#ae81ff">0</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">errorRate</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">calculateErrorRate</span>()
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">calculateErrorRate</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Calculate errors per minute
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">totalErrors</span> <span style="color:#f92672">=</span> Array.<span style="color:#a6e22e">from</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">errorCounts</span>.<span style="color:#a6e22e">values</span>()).<span style="color:#a6e22e">reduce</span>((<span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">b</span>) =&gt; <span style="color:#a6e22e">a</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">b</span>, <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">timeWindow</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">60</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">1000</span>; <span style="color:#75715e">// 5 minutes
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> Math.<span style="color:#a6e22e">round</span>((<span style="color:#a6e22e">totalErrors</span> <span style="color:#f92672">/</span> <span style="color:#a6e22e">timeWindow</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">60000</span>); <span style="color:#75715e">// errors per minute
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Initialize enhanced error tracking
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">enhancedErrorTracker</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">EnhancedErrorTracker</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Track error summary periodically
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">setInterval</span>(() =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">summary</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">enhancedErrorTracker</span>.<span style="color:#a6e22e">getErrorSummary</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">&#39;error_summary&#39;</span>, <span style="color:#a6e22e">summary</span>);
</span></span><span style="display:flex;"><span>}, <span style="color:#ae81ff">60000</span>); <span style="color:#75715e">// Every minute
</span></span></span></code></pre></div><h2 id="datadog-dashboard-creation">DataDog Dashboard Creation</h2>
<h3 id="dashboard-widgets-for-website-monitoring">Dashboard Widgets for Website Monitoring</h3>
<h4 id="creating-custom-dashboards">Creating Custom Dashboards</h4>
<p>DataDog RUM provides powerful dashboard capabilities for visualizing your website performance data:</p>
<p><strong>1. Core Web Vitals Dashboard:</strong></p>
<ul>
<li>LCP, FID, CLS trends over time</li>
<li>Performance by page URL</li>
<li>Geographic performance distribution</li>
<li>Device and browser performance comparison</li>
</ul>
<p><strong>2. User Experience Dashboard:</strong></p>
<ul>
<li>Session replay availability</li>
<li>User interaction patterns</li>
<li>Page views and unique visitors</li>
<li>Conversion funnel tracking</li>
</ul>
<p><strong>3. Error Monitoring Dashboard:</strong></p>
<ul>
<li>Error rates by type and severity</li>
<li>Error frequency over time</li>
<li>Top error-prone pages</li>
<li>Error correlation with performance metrics</li>
</ul>
<h4 id="custom-dashboard-configuration">Custom Dashboard Configuration</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;Website Performance Dashboard&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;Comprehensive website monitoring using DataDog RUM&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;widgets&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;layout&#34;</span>: { <span style="color:#f92672">&#34;x&#34;</span>: <span style="color:#ae81ff">0</span>, <span style="color:#f92672">&#34;y&#34;</span>: <span style="color:#ae81ff">0</span>, <span style="color:#f92672">&#34;width&#34;</span>: <span style="color:#ae81ff">4</span>, <span style="color:#f92672">&#34;height&#34;</span>: <span style="color:#ae81ff">3</span> },
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;definition&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;Core Web Vitals - LCP&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;timeseries&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;requests&#34;</span>: [
</span></span><span style="display:flex;"><span>          {
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;q&#34;</span>: <span style="color:#e6db74">&#34;rum.custom.lcp{*} by {env,service}&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;aggregator&#34;</span>: <span style="color:#e6db74">&#34;avg&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;conditional_formats&#34;</span>: [
</span></span><span style="display:flex;"><span>              {
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;palette&#34;</span>: <span style="color:#e6db74">&#34;red&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;comparator&#34;</span>: <span style="color:#e6db74">&#34;&gt;&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;value&#34;</span>: <span style="color:#ae81ff">2500</span>
</span></span><span style="display:flex;"><span>              },
</span></span><span style="display:flex;"><span>              {
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;palette&#34;</span>: <span style="color:#e6db74">&#34;yellow&#34;</span>, 
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;comparator&#34;</span>: <span style="color:#e6db74">&#34;&gt;&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;value&#34;</span>: <span style="color:#ae81ff">1500</span>
</span></span><span style="display:flex;"><span>              }
</span></span><span style="display:flex;"><span>            ]
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>        ],
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;yaxis&#34;</span>: {
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;label&#34;</span>: <span style="color:#e6db74">&#34;LCP (ms)&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;min&#34;</span>: <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;max&#34;</span>: <span style="color:#ae81ff">4000</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;layout&#34;</span>: { <span style="color:#f92672">&#34;x&#34;</span>: <span style="color:#ae81ff">4</span>, <span style="color:#f92672">&#34;y&#34;</span>: <span style="color:#ae81ff">0</span>, <span style="color:#f92672">&#34;width&#34;</span>: <span style="color:#ae81ff">4</span>, <span style="color:#f92672">&#34;height&#34;</span>: <span style="color:#ae81ff">3</span> },
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;definition&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;Error Rate&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;timeseries&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;requests&#34;</span>: [
</span></span><span style="display:flex;"><span>          {
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;q&#34;</span>: <span style="color:#e6db74">&#34;rum.error{*} by {env,service}.as_count()&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;aggregator&#34;</span>: <span style="color:#e6db74">&#34;sum&#34;</span>
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>        ],
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;yaxis&#34;</span>: {
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;label&#34;</span>: <span style="color:#e6db74">&#34;Errors per minute&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;min&#34;</span>: <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#ae81ff">3</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;layout&#34;</span>: { <span style="color:#f92672">&#34;x&#34;</span>: <span style="color:#ae81ff">8</span>, <span style="color:#f92672">&#34;y&#34;</span>: <span style="color:#ae81ff">0</span>, <span style="color:#f92672">&#34;width&#34;</span>: <span style="color:#ae81ff">4</span>, <span style="color:#f92672">&#34;height&#34;</span>: <span style="color:#ae81ff">3</span> },
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;definition&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;Page Views&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;timeseries&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;requests&#34;</span>: [
</span></span><span style="display:flex;"><span>          {
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;q&#34;</span>: <span style="color:#e6db74">&#34;rum.view{*} by {env,service}.as_count()&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;aggregator&#34;</span>: <span style="color:#e6db74">&#34;sum&#34;</span>
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>        ],
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;yaxis&#34;</span>: {
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;label&#34;</span>: <span style="color:#e6db74">&#34;Page views per minute&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;min&#34;</span>: <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;template_variables&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;env&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;default&#34;</span>: <span style="color:#e6db74">&#34;production&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;options&#34;</span>: [<span style="color:#e6db74">&#34;development&#34;</span>, <span style="color:#e6db74">&#34;staging&#34;</span>, <span style="color:#e6db74">&#34;production&#34;</span>]
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;service&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;default&#34;</span>: <span style="color:#e6db74">&#34;frontend-web-app&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;options&#34;</span>: [<span style="color:#e6db74">&#34;frontend-web-app&#34;</span>, <span style="color:#e6db74">&#34;mobile-app&#34;</span>, <span style="color:#e6db74">&#34;admin-panel&#34;</span>]
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;layout_type&#34;</span>: <span style="color:#e6db74">&#34;ordered&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;is_read_only&#34;</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="performance-monitoring-widgets">Performance Monitoring Widgets</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// Dashboard widget configurations for API integration
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">performanceWidgets</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Core Web Vitals Overview
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">coreWebVitals</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">title</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Core Web Vitals Overview&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;query_table&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">requests</span><span style="color:#f92672">:</span> [
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">q</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;avg:rum.lcp{*} by {env,service}&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">alias</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;LCP (ms)&#34;</span>
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">q</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;avg:rum.fid{*} by {env,service}&#34;</span>, 
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">alias</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;FID (ms)&#34;</span>
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">q</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;avg:rum.cls{*} by {env,service}&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">alias</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;CLS&#34;</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        ],
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">formulas</span><span style="color:#f92672">:</span> [
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">formula</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;LCP &lt; 2500 ? &#39;Good&#39; : (LCP &lt; 4000 ? &#39;Needs Improvement&#39; : &#39;Poor&#39;)&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">alias</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;LCP Status&#34;</span>
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">formula</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;FID &lt; 100 ? &#39;Good&#39; : (FID &lt; 300 ? &#39;Needs Improvement&#39; : &#39;Poor&#39;)&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">alias</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;FID Status&#34;</span>
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">formula</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;CLS &lt; 0.1 ? &#39;Good&#39; : (CLS &lt; 0.25 ? &#39;Needs Improvement&#39; : &#39;Poor&#39;)&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">alias</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;CLS Status&#34;</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        ]
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// API Performance
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">apiPerformance</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">title</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;API Performance Metrics&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;timeseries&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">requests</span><span style="color:#f92672">:</span> [
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">q</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;avg:rum.resource.duration{type:fetch} by {env,service,endpoint}&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">aggregator</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;avg&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">style</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">palette</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;dog_classic&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">line_type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;solid&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">line_width</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;normal&#34;</span>
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        ],
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">yaxis</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">label</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Response Time (ms)&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">min</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// User Engagement
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">userEngagement</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">title</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;User Engagement Metrics&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;timeseries&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">requests</span><span style="color:#f92672">:</span> [
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">q</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;sum:rum.view{*} by {env,service}&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">aggregator</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;sum&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">style</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">palette</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;green&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">line_type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;solid&#34;</span>
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">q</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;sum:rum.action{*} by {env,service}&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">aggregator</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;sum&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">style</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">palette</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;blue&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">line_type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;dashed&#34;</span>
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        ],
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">yaxis</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">label</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Count&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">min</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h3 id="custom-metrics-visualization">Custom Metrics Visualization</h3>
<h4 id="creating-custom-metrics">Creating Custom Metrics</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// Define custom metrics in your application
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">createCustomMetrics</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Business metrics
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">businessMetrics</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Conversion tracking
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">trackConversion</span><span style="color:#f92672">:</span> (<span style="color:#a6e22e">conversionType</span>, <span style="color:#a6e22e">value</span>) =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">&#39;conversion&#39;</span>, {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">conversion_type</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">conversionType</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">conversion_value</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">value</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">currency</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;USD&#39;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>()
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Feature usage tracking
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">trackFeatureUsage</span><span style="color:#f92672">:</span> (<span style="color:#a6e22e">featureName</span>, <span style="color:#a6e22e">usageData</span>) =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">&#39;feature_usage&#39;</span>, {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">feature_name</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">featureName</span>,
</span></span><span style="display:flex;"><span>                ...<span style="color:#a6e22e">usageData</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>()
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Custom performance metrics
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">trackCustomPerformance</span><span style="color:#f92672">:</span> (<span style="color:#a6e22e">metricName</span>, <span style="color:#a6e22e">value</span>, <span style="color:#a6e22e">unit</span>) =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">&#39;custom_performance&#39;</span>, {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">metric_name</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">metricName</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">metric_value</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">value</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">metric_unit</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">unit</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>()
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">businessMetrics</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Usage examples
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">metrics</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">createCustomMetrics</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Track conversions
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">metrics</span>.<span style="color:#a6e22e">trackConversion</span>(<span style="color:#e6db74">&#39;signup&#39;</span>, <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">metrics</span>.<span style="color:#a6e22e">trackConversion</span>(<span style="color:#e6db74">&#39;purchase&#39;</span>, <span style="color:#ae81ff">29.99</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Track feature usage
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">metrics</span>.<span style="color:#a6e22e">trackFeatureUsage</span>(<span style="color:#e6db74">&#39;advanced_search&#39;</span>, {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">search_query</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;datadog rum&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">results_count</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">15</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">filters_applied</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Track custom performance
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">metrics</span>.<span style="color:#a6e22e">trackCustomPerformance</span>(<span style="color:#e6db74">&#39;checkout_completion_time&#39;</span>, <span style="color:#ae81ff">4500</span>, <span style="color:#e6db74">&#39;ms&#39;</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">metrics</span>.<span style="color:#a6e22e">trackCustomPerformance</span>(<span style="color:#e6db74">&#39;data_sync_time&#39;</span>, <span style="color:#ae81ff">2.5</span>, <span style="color:#e6db74">&#39;seconds&#39;</span>);
</span></span></code></pre></div><h4 id="custom-dashboard-api">Custom Dashboard API</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// Create dashboards programmatically using DataDog API
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">dashboardApi</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Create a new dashboard
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">createDashboard</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">async</span> (<span style="color:#a6e22e">dashboardConfig</span>) =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">response</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">fetch</span>(<span style="color:#e6db74">&#39;https://api.datadoghq.com/api/v1/dashboard&#39;</span>, {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">method</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;POST&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">headers</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#39;Content-Type&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;application/json&#39;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#39;DD-API-KEY&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;YOUR_API_KEY&#39;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#39;DD-APPLICATION-KEY&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;YOUR_APPLICATION_KEY&#39;</span>
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">body</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">dashboardConfig</span>)
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">ok</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">`Failed to create dashboard: </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">statusText</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">json</span>();
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Update existing dashboard
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">updateDashboard</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">async</span> (<span style="color:#a6e22e">dashboardId</span>, <span style="color:#a6e22e">dashboardConfig</span>) =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">response</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">fetch</span>(<span style="color:#e6db74">`https://api.datadoghq.com/api/v1/dashboard/</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">dashboardId</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>, {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">method</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;PUT&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">headers</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#39;Content-Type&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;application/json&#39;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#39;DD-API-KEY&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;YOUR_API_KEY&#39;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#39;DD-APPLICATION-KEY&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;YOUR_APPLICATION_KEY&#39;</span>
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">body</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">dashboardConfig</span>)
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">ok</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">`Failed to update dashboard: </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">statusText</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">json</span>();
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Get dashboard by ID
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">getDashboard</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">async</span> (<span style="color:#a6e22e">dashboardId</span>) =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">response</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">fetch</span>(<span style="color:#e6db74">`https://api.datadoghq.com/api/v1/dashboard/</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">dashboardId</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>, {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">headers</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#39;DD-API-KEY&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;YOUR_API_KEY&#39;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#39;DD-APPLICATION-KEY&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;YOUR_APPLICATION_KEY&#39;</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">ok</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">`Failed to get dashboard: </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">statusText</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">json</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Example dashboard creation
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">createWebsiteMonitoringDashboard</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">async</span> () =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">dashboardConfig</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">title</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Website Performance Monitoring&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">description</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Real-time website performance and user experience monitoring&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">widgets</span><span style="color:#f92672">:</span> [
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Core Web Vitals widget
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">layout</span><span style="color:#f92672">:</span> { <span style="color:#a6e22e">x</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">y</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">width</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">6</span>, <span style="color:#a6e22e">height</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">4</span> },
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">definition</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">title</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Core Web Vitals&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;timeseries&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">requests</span><span style="color:#f92672">:</span> [
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                            <span style="color:#a6e22e">q</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;avg:rum.lcp{*} by {env,service}&#34;</span>,
</span></span><span style="display:flex;"><span>                            <span style="color:#a6e22e">aggregator</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;avg&#34;</span>
</span></span><span style="display:flex;"><span>                        },
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                            <span style="color:#a6e22e">q</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;avg:rum.fid{*} by {env,service}&#34;</span>,
</span></span><span style="display:flex;"><span>                            <span style="color:#a6e22e">aggregator</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;avg&#34;</span>
</span></span><span style="display:flex;"><span>                        },
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                            <span style="color:#a6e22e">q</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;avg:rum.cls{*} by {env,service}&#34;</span>,
</span></span><span style="display:flex;"><span>                            <span style="color:#a6e22e">aggregator</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;avg&#34;</span>
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                    ]
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Error rate widget
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">layout</span><span style="color:#f92672">:</span> { <span style="color:#a6e22e">x</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">6</span>, <span style="color:#a6e22e">y</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">width</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">6</span>, <span style="color:#a6e22e">height</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">4</span> },
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">definition</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">title</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Error Rate&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;timeseries&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">requests</span><span style="color:#f92672">:</span> [
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                            <span style="color:#a6e22e">q</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;sum:rum.error{*} by {env,service}&#34;</span>,
</span></span><span style="display:flex;"><span>                            <span style="color:#a6e22e">aggregator</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;sum&#34;</span>
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                    ]
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        ],
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">template_variables</span><span style="color:#f92672">:</span> [
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;env&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">default</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;production&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">options</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;development&#34;</span>, <span style="color:#e6db74">&#34;staging&#34;</span>, <span style="color:#e6db74">&#34;production&#34;</span>]
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;service&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">default</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;frontend-web-app&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">options</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;frontend-web-app&#34;</span>, <span style="color:#e6db74">&#34;mobile-app&#34;</span>]
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        ],
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">layout_type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;ordered&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">is_read_only</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">result</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">dashboardApi</span>.<span style="color:#a6e22e">createDashboard</span>(<span style="color:#a6e22e">dashboardConfig</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Dashboard created successfully:&#39;</span>, <span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">url</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">result</span>;
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">error</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#e6db74">&#39;Failed to create dashboard:&#39;</span>, <span style="color:#a6e22e">error</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">throw</span> <span style="color:#a6e22e">error</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h3 id="alerting-configuration">Alerting Configuration</h3>
<h4 id="setting-up-alerts">Setting Up Alerts</h4>
<p>DataDog RUM provides powerful alerting capabilities to notify you of performance issues:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// Alert configuration examples
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">alertRules</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Core Web Vitals alerts
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">coreWebVitals</span><span style="color:#f92672">:</span> [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;LCP Performance Alert&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;LCP is exceeding the performance threshold&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">query</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;avg(last_5m):avg:rum.lcp{*} &gt; 2500&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">thresholds</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">critical</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2500</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">warning</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2000</span>
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">tags</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;team:frontend&#34;</span>, <span style="color:#e6db74">&#34;service:web-app&#34;</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">priority</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;FID Performance Alert&#34;</span>, 
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;First Input Delay is too high&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">query</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;avg(last_5m):avg:rum.fid{*} &gt; 100&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">thresholds</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">critical</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">100</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">warning</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">80</span>
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">tags</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;team:frontend&#34;</span>, <span style="color:#e6db74">&#34;service:web-app&#34;</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">priority</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;CLS Performance Alert&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Cumulative Layout Shift is too high&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">query</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;avg(last_5m):avg:rum.cls{*} &gt; 0.1&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">thresholds</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">critical</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0.1</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">warning</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0.05</span>
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">tags</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;team:frontend&#34;</span>, <span style="color:#e6db74">&#34;service:web-app&#34;</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">priority</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    ],
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Error rate alerts
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">errorRate</span><span style="color:#f92672">:</span> [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;High Error Rate Alert&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Error rate is exceeding acceptable levels&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">query</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;sum(last_5m):sum:rum.error{*} &gt; 100&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">thresholds</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">critical</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">100</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">warning</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">50</span>
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">tags</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;team:frontend&#34;</span>, <span style="color:#e6db74">&#34;service:web-app&#34;</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">priority</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;JavaScript Error Alert&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">query</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;sum(last_5m):sum:rum.error{type:javascript} &gt; 50&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">thresholds</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">critical</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">50</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">warning</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">25</span>
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">tags</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;team:frontend&#34;</span>, <span style="color:#e6db74">&#34;service:web-app&#34;</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">priority</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    ],
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// User experience alerts
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">userExperience</span><span style="color:#f92672">:</span> [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Low Page Views Alert&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Page views have dropped significantly&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">query</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;sum(last_10m):sum:rum.view{*} &lt; 100&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">thresholds</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">critical</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">100</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">warning</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">150</span>
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">tags</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;team:product&#34;</span>, <span style="color:#e6db74">&#34;service:web-app&#34;</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">priority</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    ]
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Create alerts programmatically
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">alertApi</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">createAlert</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">async</span> (<span style="color:#a6e22e">alertConfig</span>) =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">response</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">fetch</span>(<span style="color:#e6db74">&#39;https://api.datadoghq.com/api/v1/monitor&#39;</span>, {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">method</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;POST&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">headers</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#39;Content-Type&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;application/json&#39;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#39;DD-API-KEY&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;YOUR_API_KEY&#39;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#39;DD-APPLICATION-KEY&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;YOUR_APPLICATION_KEY&#39;</span>
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">body</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">alertConfig</span>)
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">ok</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">`Failed to create alert: </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">statusText</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">json</span>();
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">createAllAlerts</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">async</span> () =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">allAlerts</span> <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>            ...<span style="color:#a6e22e">alertRules</span>.<span style="color:#a6e22e">coreWebVitals</span>,
</span></span><span style="display:flex;"><span>            ...<span style="color:#a6e22e">alertRules</span>.<span style="color:#a6e22e">errorRate</span>,
</span></span><span style="display:flex;"><span>            ...<span style="color:#a6e22e">alertRules</span>.<span style="color:#a6e22e">userExperience</span>
</span></span><span style="display:flex;"><span>        ];
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">results</span> <span style="color:#f92672">=</span> [];
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">alertConfig</span> <span style="color:#66d9ef">of</span> <span style="color:#a6e22e">allAlerts</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">result</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">alertApi</span>.<span style="color:#a6e22e">createAlert</span>(<span style="color:#a6e22e">alertConfig</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">results</span>.<span style="color:#a6e22e">push</span>({ <span style="color:#a6e22e">success</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>, <span style="color:#a6e22e">config</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">alertConfig</span>, <span style="color:#a6e22e">result</span> });
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">error</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">results</span>.<span style="color:#a6e22e">push</span>({ <span style="color:#a6e22e">success</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>, <span style="color:#a6e22e">config</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">alertConfig</span>, <span style="color:#a6e22e">error</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">message</span> });
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">results</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h4 id="alert-integration-with-external-systems">Alert Integration with External Systems</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// Integrate DataDog alerts with external systems
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">alertIntegrations</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Slack integration
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">slack</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">webhookUrl</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK&#39;</span>,
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">sendSlackAlert</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">async</span> (<span style="color:#a6e22e">alertData</span>) =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">message</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">text</span><span style="color:#f92672">:</span> <span style="color:#e6db74">`:warning: DataDog Alert: </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">alertData</span>.<span style="color:#a6e22e">title</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">attachments</span><span style="color:#f92672">:</span> [
</span></span><span style="display:flex;"><span>                    {
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">color</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">alertData</span>.<span style="color:#a6e22e">priority</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;critical&#39;</span> <span style="color:#f92672">?</span> <span style="color:#e6db74">&#39;danger&#39;</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;warning&#39;</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">fields</span><span style="color:#f92672">:</span> [
</span></span><span style="display:flex;"><span>                            {
</span></span><span style="display:flex;"><span>                                <span style="color:#a6e22e">title</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Alert&#39;</span>,
</span></span><span style="display:flex;"><span>                                <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">alertData</span>.<span style="color:#a6e22e">message</span>,
</span></span><span style="display:flex;"><span>                                <span style="color:#66d9ef">short</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>                            },
</span></span><span style="display:flex;"><span>                            {
</span></span><span style="display:flex;"><span>                                <span style="color:#a6e22e">title</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Environment&#39;</span>,
</span></span><span style="display:flex;"><span>                                <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">alertData</span>.<span style="color:#a6e22e">env</span> <span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;unknown&#39;</span>,
</span></span><span style="display:flex;"><span>                                <span style="color:#66d9ef">short</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>                            },
</span></span><span style="display:flex;"><span>                            {
</span></span><span style="display:flex;"><span>                                <span style="color:#a6e22e">title</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Service&#39;</span>,
</span></span><span style="display:flex;"><span>                                <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">alertData</span>.<span style="color:#a6e22e">service</span> <span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;unknown&#39;</span>,
</span></span><span style="display:flex;"><span>                                <span style="color:#66d9ef">short</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>                            },
</span></span><span style="display:flex;"><span>                            {
</span></span><span style="display:flex;"><span>                                <span style="color:#a6e22e">title</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Severity&#39;</span>,
</span></span><span style="display:flex;"><span>                                <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">alertData</span>.<span style="color:#a6e22e">priority</span> <span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;unknown&#39;</span>,
</span></span><span style="display:flex;"><span>                                <span style="color:#66d9ef">short</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>                            }
</span></span><span style="display:flex;"><span>                        ]
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                ]
</span></span><span style="display:flex;"><span>            };
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">fetch</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">webhookUrl</span>, {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">method</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;POST&#39;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">headers</span><span style="color:#f92672">:</span> { <span style="color:#e6db74">&#39;Content-Type&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;application/json&#39;</span> },
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">body</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">message</span>)
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Email integration
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">email</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">sendGridApiKey</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;YOUR_SENDGRID_API_KEY&#39;</span>,
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">sendEmailAlert</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">async</span> (<span style="color:#a6e22e">alertData</span>, <span style="color:#a6e22e">recipients</span>) =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">email</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">personalizations</span><span style="color:#f92672">:</span> [
</span></span><span style="display:flex;"><span>                    {
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">to</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">recipients</span>.<span style="color:#a6e22e">map</span>(<span style="color:#a6e22e">email</span> =&gt; ({ <span style="color:#a6e22e">email</span> })),
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">subject</span><span style="color:#f92672">:</span> <span style="color:#e6db74">`DataDog Alert: </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">alertData</span>.<span style="color:#a6e22e">title</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                ],
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">from</span><span style="color:#f92672">:</span> { <span style="color:#a6e22e">email</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;alerts@yourapp.com&#39;</span> },
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">content</span><span style="color:#f92672">:</span> [
</span></span><span style="display:flex;"><span>                    {
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;text/html&#39;</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#e6db74">`
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                            &lt;h2&gt;DataDog Alert&lt;/h2&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                            &lt;p&gt;&lt;strong&gt;Alert:&lt;/strong&gt; </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">alertData</span>.<span style="color:#a6e22e">title</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&lt;/p&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                            &lt;p&gt;&lt;strong&gt;Message:&lt;/strong&gt; </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">alertData</span>.<span style="color:#a6e22e">message</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&lt;/p&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                            &lt;p&gt;&lt;strong&gt;Environment:&lt;/strong&gt; </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">alertData</span>.<span style="color:#a6e22e">env</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&lt;/p&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                            &lt;p&gt;&lt;strong&gt;Service:&lt;/strong&gt; </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">alertData</span>.<span style="color:#a6e22e">service</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&lt;/p&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                            &lt;p&gt;&lt;strong&gt;Severity:&lt;/strong&gt; </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">alertData</span>.<span style="color:#a6e22e">priority</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&lt;/p&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                            &lt;p&gt;&lt;strong&gt;Timestamp:&lt;/strong&gt; </span><span style="color:#e6db74">${</span><span style="color:#66d9ef">new</span> Date(<span style="color:#a6e22e">alertData</span>.<span style="color:#a6e22e">timestamp</span>).<span style="color:#a6e22e">toISOString</span>()<span style="color:#e6db74">}</span><span style="color:#e6db74">&lt;/p&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                        `</span>
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                ]
</span></span><span style="display:flex;"><span>            };
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">fetch</span>(<span style="color:#e6db74">&#39;https://api.sendgrid.com/v3/mail/send&#39;</span>, {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">method</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;POST&#39;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">headers</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#39;Content-Type&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;application/json&#39;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#39;Authorization&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">`Bearer </span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">sendGridApiKey</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>
</span></span><span style="display:flex;"><span>                },
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">body</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">email</span>)
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// PagerDuty integration
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">pagerDuty</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">integrationKey</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;YOUR_PAGERDUTY_INTEGRATION_KEY&#39;</span>,
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">sendPagerDutyAlert</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">async</span> (<span style="color:#a6e22e">alertData</span>) =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">incident</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">routing_key</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">integrationKey</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">event_action</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;trigger&#39;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">dedup_key</span><span style="color:#f92672">:</span> <span style="color:#e6db74">`datadog-</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">alertData</span>.<span style="color:#a6e22e">id</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">payload</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">summary</span><span style="color:#f92672">:</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">alertData</span>.<span style="color:#a6e22e">title</span><span style="color:#e6db74">}</span><span style="color:#e6db74">: </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">alertData</span>.<span style="color:#a6e22e">message</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">source</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;DataDog RUM&#39;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">severity</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">alertData</span>.<span style="color:#a6e22e">priority</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;critical&#39;</span> <span style="color:#f92672">?</span> <span style="color:#e6db74">&#39;critical&#39;</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;error&#39;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">component</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">alertData</span>.<span style="color:#a6e22e">service</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">group</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">alertData</span>.<span style="color:#a6e22e">env</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">class</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;performance&#39;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">custom_details</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">alert_id</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">alertData</span>.<span style="color:#a6e22e">id</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">query</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">alertData</span>.<span style="color:#a6e22e">query</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">alertData</span>.<span style="color:#a6e22e">value</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">threshold</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">alertData</span>.<span style="color:#a6e22e">threshold</span>
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            };
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">fetch</span>(<span style="color:#e6db74">&#39;https://events.pagerduty.com/v2/enqueue&#39;</span>, {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">method</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;POST&#39;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">headers</span><span style="color:#f92672">:</span> { <span style="color:#e6db74">&#39;Content-Type&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;application/json&#39;</span> },
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">body</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">incident</span>)
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h2 id="implementation-examples">Implementation Examples</h2>
<h3 id="datadog-rum-javascript-sdk-integration">DataDog RUM JavaScript SDK Integration</h3>
<h4 id="basic-integration">Basic Integration</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#75715e">&lt;!DOCTYPE html&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">html</span> <span style="color:#a6e22e">lang</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;en&#34;</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">charset</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;UTF-8&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;viewport&#34;</span> <span style="color:#a6e22e">content</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;width=device-width, initial-scale=1.0&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">title</span>&gt;Your Web Application&lt;/<span style="color:#f92672">title</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!-- Your application content --&gt;</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!-- DataDog RUM SDK --&gt;</span>
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://www.datadoghq-browser-agent.com/datadog-rum.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Initialize DataDog RUM
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        (<span style="color:#66d9ef">function</span>() {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Configuration based on environment
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">config</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">development</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">applicationId</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;dev-application-id&#39;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">clientToken</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;dev-client-token&#39;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">env</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;development&#39;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">sessionSampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">100</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">sessionReplaySampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">100</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">debug</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>                },
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">staging</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">applicationId</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;staging-application-id&#39;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">clientToken</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;staging-client-token&#39;</span>, 
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">env</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;staging&#39;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">sessionSampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">50</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">sessionReplaySampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">20</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">debug</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>                },
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">production</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">applicationId</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;prod-application-id&#39;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">clientToken</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;prod-client-token&#39;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">env</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;production&#39;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">sessionSampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">20</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">sessionReplaySampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">5</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">debug</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            };
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Detect environment
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">getEnvironment</span>() {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">hostname</span> <span style="color:#f92672">=</span> window.<span style="color:#a6e22e">location</span>.<span style="color:#a6e22e">hostname</span>;
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">hostname</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#e6db74">&#39;localhost&#39;</span>) <span style="color:#f92672">||</span> <span style="color:#a6e22e">hostname</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#e6db74">&#39;127.0.0.1&#39;</span>)) {
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;development&#39;</span>;
</span></span><span style="display:flex;"><span>                } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">hostname</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#e6db74">&#39;staging&#39;</span>)) {
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;staging&#39;</span>;
</span></span><span style="display:flex;"><span>                } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;production&#39;</span>;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">environment</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">getEnvironment</span>();
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">rumConfig</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">config</span>[<span style="color:#a6e22e">environment</span>];
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Initialize DataDog RUM
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">DD_RUM</span>.<span style="color:#a6e22e">onReady</span>(<span style="color:#66d9ef">function</span>() {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">DD_RUM</span>.<span style="color:#a6e22e">init</span>({
</span></span><span style="display:flex;"><span>                    ...<span style="color:#a6e22e">rumConfig</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">service</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;your-web-application&#39;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">version</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;1.0.0&#39;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">trackUserInteractions</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">trackResources</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">trackLongTasks</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">trackFrustrations</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">defaultPrivacyLevel</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;mask-user-input&#39;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">allowedTracingUrls</span><span style="color:#f92672">:</span> [
</span></span><span style="display:flex;"><span>                        <span style="color:#e6db74">&#39;https://api.yourapp.com&#39;</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#e6db74">&#39;https://internal-api.yourapp.com&#39;</span>
</span></span><span style="display:flex;"><span>                    ],
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">beforeSend</span><span style="color:#f92672">:</span> (<span style="color:#a6e22e">event</span>) =&gt; {
</span></span><span style="display:flex;"><span>                        <span style="color:#75715e">// Filter or modify events before sending
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">type</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;error&#39;</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">isTrusted</span> <span style="color:#f92672">===</span> <span style="color:#66d9ef">false</span>) {
</span></span><span style="display:flex;"><span>                            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>; <span style="color:#75715e">// Drop untrusted errors
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                        }
</span></span><span style="display:flex;"><span>                        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                });
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// Set user context if available
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#66d9ef">if</span> (window.<span style="color:#a6e22e">currentUser</span>) {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">DD_RUM</span>.<span style="color:#a6e22e">setUser</span>({
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> window.<span style="color:#a6e22e">currentUser</span>.<span style="color:#a6e22e">id</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> window.<span style="color:#a6e22e">currentUser</span>.<span style="color:#a6e22e">name</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">email</span><span style="color:#f92672">:</span> window.<span style="color:#a6e22e">currentUser</span>.<span style="color:#a6e22e">email</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">role</span><span style="color:#f92672">:</span> window.<span style="color:#a6e22e">currentUser</span>.<span style="color:#a6e22e">role</span>
</span></span><span style="display:flex;"><span>                    });
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// Add global context
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#a6e22e">DD_RUM</span>.<span style="color:#a6e22e">setGlobalContext</span>({
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">page_category</span><span style="color:#f92672">:</span> window.<span style="color:#a6e22e">pageCategory</span> <span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;general&#39;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">campaign</span><span style="color:#f92672">:</span> window.<span style="color:#a6e22e">campaign</span> <span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;organic&#39;</span>
</span></span><span style="display:flex;"><span>                });
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        })();
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">html</span>&gt;
</span></span></code></pre></div><h4 id="advanced-integration-with-react">Advanced Integration with React</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// React integration example
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">useEffect</span> } <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;react&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">datadogRum</span> } <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;@datadog/browser-rum&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// DataDog RUM provider for React
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">DataDogProvider</span>({ <span style="color:#a6e22e">children</span>, <span style="color:#a6e22e">config</span> }) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">useEffect</span>(() =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Initialize DataDog RUM
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">getInternalContext</span>()) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">init</span>(<span style="color:#a6e22e">config</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Track route changes
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">originalPushState</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">history</span>.<span style="color:#a6e22e">pushState</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">originalReplaceState</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">history</span>.<span style="color:#a6e22e">replaceState</span>;
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">trackRouteChange</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">method</span>) =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span>(...<span style="color:#a6e22e">args</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">url</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">args</span>[<span style="color:#ae81ff">2</span>];
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">url</span>) {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">startView</span>({
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> document.<span style="color:#a6e22e">title</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">url</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">url</span>
</span></span><span style="display:flex;"><span>                    });
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">method</span>.<span style="color:#a6e22e">apply</span>(<span style="color:#66d9ef">this</span>, <span style="color:#a6e22e">args</span>);
</span></span><span style="display:flex;"><span>            };
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">history</span>.<span style="color:#a6e22e">pushState</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">trackRouteChange</span>(<span style="color:#a6e22e">originalPushState</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">history</span>.<span style="color:#a6e22e">replaceState</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">trackRouteChange</span>(<span style="color:#a6e22e">originalReplaceState</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Track initial view
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">startView</span>({
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> document.<span style="color:#a6e22e">title</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">url</span><span style="color:#f92672">:</span> window.<span style="color:#a6e22e">location</span>.<span style="color:#a6e22e">href</span>
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> () =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">history</span>.<span style="color:#a6e22e">pushState</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">originalPushState</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">history</span>.<span style="color:#a6e22e">replaceState</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">originalReplaceState</span>;
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>    }, [<span style="color:#a6e22e">config</span>]);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">children</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Usage in React app
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">App</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">rumConfig</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">applicationId</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">process</span>.<span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">REACT_APP_DD_APPLICATION_ID</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">clientToken</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">process</span>.<span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">REACT_APP_DD_CLIENT_TOKEN</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">site</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;datadoghq.com&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">service</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;react-web-app&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">env</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">process</span>.<span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">NODE_ENV</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">version</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">process</span>.<span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">REACT_APP_VERSION</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">sessionSampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">100</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">sessionReplaySampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">20</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">trackUserInteractions</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">trackResources</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">trackLongTasks</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">defaultPrivacyLevel</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;mask-user-input&#39;</span>
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> (
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">DataDogProvider</span> <span style="color:#a6e22e">config</span><span style="color:#f92672">=</span>{<span style="color:#a6e22e">rumConfig</span>}<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span> <span style="color:#a6e22e">className</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;App&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>                {<span style="color:#75715e">/* Your app components */</span>}
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/div&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/DataDogProvider&gt;</span>
</span></span><span style="display:flex;"><span>    );
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Custom hook for tracking user interactions
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">useDataDogTracking</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">trackUserAction</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">actionName</span>, <span style="color:#a6e22e">data</span> <span style="color:#f92672">=</span> {}) =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#a6e22e">actionName</span>, {
</span></span><span style="display:flex;"><span>            ...<span style="color:#a6e22e">data</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>()
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">trackCustomError</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">error</span>, <span style="color:#a6e22e">context</span> <span style="color:#f92672">=</span> {}) =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addError</span>(<span style="color:#a6e22e">error</span>, {
</span></span><span style="display:flex;"><span>            ...<span style="color:#a6e22e">context</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>()
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">trackPerformanceMetric</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">metricName</span>, <span style="color:#a6e22e">value</span>, <span style="color:#a6e22e">unit</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;ms&#39;</span>) =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">&#39;performance_metric&#39;</span>, {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">metric_name</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">metricName</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">metric_value</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">value</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">metric_unit</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">unit</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>()
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">trackUserAction</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">trackCustomError</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">trackPerformanceMetric</span>
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Usage in components
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">CheckoutButton</span>({ <span style="color:#a6e22e">onCheckout</span> }) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> { <span style="color:#a6e22e">trackUserAction</span>, <span style="color:#a6e22e">trackCustomError</span>, <span style="color:#a6e22e">trackPerformanceMetric</span> } <span style="color:#f92672">=</span> <span style="color:#a6e22e">useDataDogTracking</span>();
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">handleCheckout</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">async</span> () =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">startTime</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">performance</span>.<span style="color:#a6e22e">now</span>();
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">trackUserAction</span>(<span style="color:#e6db74">&#39;checkout_started&#39;</span>, {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">button_type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;primary&#39;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">cart_value</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">getCurrentCartValue</span>()
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">onCheckout</span>();
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">duration</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">performance</span>.<span style="color:#a6e22e">now</span>() <span style="color:#f92672">-</span> <span style="color:#a6e22e">startTime</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">trackPerformanceMetric</span>(<span style="color:#e6db74">&#39;checkout_duration&#39;</span>, <span style="color:#a6e22e">duration</span>);
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">trackUserAction</span>(<span style="color:#e6db74">&#39;checkout_completed&#39;</span>, {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">success</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">duration</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">duration</span>
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">error</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">trackCustomError</span>(<span style="color:#a6e22e">error</span>, {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">action</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;checkout&#39;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">cart_value</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">getCurrentCartValue</span>()
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">trackUserAction</span>(<span style="color:#e6db74">&#39;checkout_failed&#39;</span>, {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">error_message</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">message</span>
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">throw</span> <span style="color:#a6e22e">error</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> (
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">button</span> <span style="color:#a6e22e">onClick</span><span style="color:#f92672">=</span>{<span style="color:#a6e22e">handleCheckout</span>}<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">Checkout</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/button&gt;</span>
</span></span><span style="display:flex;"><span>    );
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="custom-event-tracking-for-json-endpoints">Custom Event Tracking for JSON Endpoints</h3>
<h4 id="api-monitoring-setup">API Monitoring Setup</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// Enhanced API monitoring with DataDog RUM
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ApiMonitor</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">constructor</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">setupInterceptors</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">metrics</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Map</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">errorCounts</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Map</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">setupInterceptors</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Fetch interceptor
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">originalFetch</span> <span style="color:#f92672">=</span> window.<span style="color:#a6e22e">fetch</span>;
</span></span><span style="display:flex;"><span>        window.<span style="color:#a6e22e">fetch</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">async</span> (...<span style="color:#a6e22e">args</span>) =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">url</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">args</span>[<span style="color:#ae81ff">0</span>];
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">options</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">args</span>[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">||</span> {};
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">startTime</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">performance</span>.<span style="color:#a6e22e">now</span>();
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">response</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">originalFetch</span>.<span style="color:#a6e22e">apply</span>(<span style="color:#66d9ef">this</span>, <span style="color:#a6e22e">args</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">duration</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">performance</span>.<span style="color:#a6e22e">now</span>() <span style="color:#f92672">-</span> <span style="color:#a6e22e">startTime</span>;
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">trackApiCall</span>(<span style="color:#a6e22e">url</span>, <span style="color:#a6e22e">options</span>.<span style="color:#a6e22e">method</span> <span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;GET&#39;</span>, <span style="color:#a6e22e">duration</span>, <span style="color:#a6e22e">response</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">response</span>;
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">error</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">duration</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">performance</span>.<span style="color:#a6e22e">now</span>() <span style="color:#f92672">-</span> <span style="color:#a6e22e">startTime</span>;
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">trackApiError</span>(<span style="color:#a6e22e">url</span>, <span style="color:#a6e22e">options</span>.<span style="color:#a6e22e">method</span> <span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;GET&#39;</span>, <span style="color:#a6e22e">duration</span>, <span style="color:#a6e22e">error</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">throw</span> <span style="color:#a6e22e">error</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// XMLHttpRequest interceptor
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">originalXHR</span> <span style="color:#f92672">=</span> window.<span style="color:#a6e22e">XMLHttpRequest</span>;
</span></span><span style="display:flex;"><span>        window.<span style="color:#a6e22e">XMLHttpRequest</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>() {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">xhr</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">originalXHR</span>();
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">startTime</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">performance</span>.<span style="color:#a6e22e">now</span>();
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Track request details
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">method</span>, <span style="color:#a6e22e">url</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">xhr</span>.<span style="color:#a6e22e">open</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">_method</span>, <span style="color:#a6e22e">_url</span>, ...<span style="color:#a6e22e">args</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">method</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">_method</span>;
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">url</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">_url</span>;
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">originalXHR</span>.<span style="color:#a6e22e">prototype</span>.<span style="color:#a6e22e">open</span>.<span style="color:#a6e22e">apply</span>(<span style="color:#a6e22e">xhr</span>, [<span style="color:#a6e22e">method</span>, <span style="color:#a6e22e">url</span>, ...<span style="color:#a6e22e">args</span>]);
</span></span><span style="display:flex;"><span>            };
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">xhr</span>.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;loadend&#39;</span>, () =&gt; {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">duration</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">performance</span>.<span style="color:#a6e22e">now</span>() <span style="color:#f92672">-</span> <span style="color:#a6e22e">startTime</span>;
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">success</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">xhr</span>.<span style="color:#a6e22e">status</span> <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">200</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">xhr</span>.<span style="color:#a6e22e">status</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">300</span>;
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">trackApiCall</span>(<span style="color:#a6e22e">url</span>, <span style="color:#a6e22e">method</span>, <span style="color:#a6e22e">duration</span>, {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">ok</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">success</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">status</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">xhr</span>.<span style="color:#a6e22e">status</span>
</span></span><span style="display:flex;"><span>                });
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">xhr</span>.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;error&#39;</span>, () =&gt; {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">duration</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">performance</span>.<span style="color:#a6e22e">now</span>() <span style="color:#f92672">-</span> <span style="color:#a6e22e">startTime</span>;
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">trackApiError</span>(<span style="color:#a6e22e">url</span>, <span style="color:#a6e22e">method</span>, <span style="color:#a6e22e">duration</span>, <span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">&#39;Network error&#39;</span>));
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">xhr</span>;
</span></span><span style="display:flex;"><span>        }.<span style="color:#a6e22e">bind</span>(<span style="color:#66d9ef">this</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">trackApiCall</span>(<span style="color:#a6e22e">url</span>, <span style="color:#a6e22e">method</span>, <span style="color:#a6e22e">duration</span>, <span style="color:#a6e22e">response</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Extract endpoint name
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">endpoint</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">extractEndpoint</span>(<span style="color:#a6e22e">url</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Track in DataDog
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">&#39;api_call&#39;</span>, {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">endpoint</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">endpoint</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">method</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">method</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">duration</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">duration</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">status</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">status</span> <span style="color:#f92672">||</span> (<span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">ok</span> <span style="color:#f92672">?</span> <span style="color:#ae81ff">200</span> <span style="color:#f92672">:</span> <span style="color:#ae81ff">500</span>),
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">success</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">ok</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">size</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">headers</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;content-length&#39;</span>) <span style="color:#f92672">||</span> <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>()
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Track metrics for alerting
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">updateEndpointMetrics</span>(<span style="color:#a6e22e">endpoint</span>, <span style="color:#a6e22e">duration</span>, <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">ok</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Check for slow API calls
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">duration</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">2000</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addError</span>(<span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">`Slow API call: </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">endpoint</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>), {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">endpoint</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">endpoint</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">method</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">method</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">duration</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">duration</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">threshold</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2000</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">severity</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;warning&#39;</span>
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">trackApiError</span>(<span style="color:#a6e22e">url</span>, <span style="color:#a6e22e">method</span>, <span style="color:#a6e22e">duration</span>, <span style="color:#a6e22e">error</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">endpoint</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">extractEndpoint</span>(<span style="color:#a6e22e">url</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addError</span>(<span style="color:#a6e22e">error</span>, {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">endpoint</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">endpoint</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">method</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">method</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">duration</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">duration</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">error_type</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">categorizeApiError</span>(<span style="color:#a6e22e">error</span>),
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>()
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Track error counts for alerting
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">errorKey</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">endpoint</span><span style="color:#e6db74">}</span><span style="color:#e6db74">:</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">method</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">count</span> <span style="color:#f92672">=</span> (<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">errorCounts</span>.<span style="color:#a6e22e">get</span>(<span style="color:#a6e22e">errorKey</span>) <span style="color:#f92672">||</span> <span style="color:#ae81ff">0</span>) <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">errorCounts</span>.<span style="color:#a6e22e">set</span>(<span style="color:#a6e22e">errorKey</span>, <span style="color:#a6e22e">count</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Alert on high error rates
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">count</span> <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">10</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addError</span>(<span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">`High error rate for </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">endpoint</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>), {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">endpoint</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">endpoint</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">error_count</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">count</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">time_window</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;5_minutes&#39;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">severity</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;critical&#39;</span>
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">extractEndpoint</span>(<span style="color:#a6e22e">url</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">urlObj</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">URL</span>(<span style="color:#a6e22e">url</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">urlObj</span>.<span style="color:#a6e22e">pathname</span>;
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">catch</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">url</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">categorizeApiError</span>(<span style="color:#a6e22e">error</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">name</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;TypeError&#39;</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">message</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#e6db74">&#39;fetch&#39;</span>)) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;network_error&#39;</span>;
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">message</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#e6db74">&#39;4&#39;</span>)) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;client_error&#39;</span>;
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">message</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#e6db74">&#39;5&#39;</span>)) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;server_error&#39;</span>;
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;unknown_error&#39;</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">updateEndpointMetrics</span>(<span style="color:#a6e22e">endpoint</span>, <span style="color:#a6e22e">duration</span>, <span style="color:#a6e22e">success</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">metrics</span>.<span style="color:#a6e22e">has</span>(<span style="color:#a6e22e">endpoint</span>)) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">metrics</span>.<span style="color:#a6e22e">set</span>(<span style="color:#a6e22e">endpoint</span>, {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">totalCalls</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">successfulCalls</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">totalDuration</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">errorRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">averageDuration</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">metrics</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">metrics</span>.<span style="color:#a6e22e">get</span>(<span style="color:#a6e22e">endpoint</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">metrics</span>.<span style="color:#a6e22e">totalCalls</span><span style="color:#f92672">++</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">success</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">metrics</span>.<span style="color:#a6e22e">successfulCalls</span><span style="color:#f92672">++</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">metrics</span>.<span style="color:#a6e22e">totalDuration</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">duration</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">metrics</span>.<span style="color:#a6e22e">averageDuration</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">metrics</span>.<span style="color:#a6e22e">totalDuration</span> <span style="color:#f92672">/</span> <span style="color:#a6e22e">metrics</span>.<span style="color:#a6e22e">totalCalls</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">metrics</span>.<span style="color:#a6e22e">errorRate</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">metrics</span>.<span style="color:#a6e22e">totalCalls</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">metrics</span>.<span style="color:#a6e22e">successfulCalls</span>) <span style="color:#f92672">/</span> <span style="color:#a6e22e">metrics</span>.<span style="color:#a6e22e">totalCalls</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">getEndpointMetrics</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">summary</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">endpoints</span><span style="color:#f92672">:</span> [],
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">totalCalls</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">totalErrors</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">averageResponseTime</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">totalDuration</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">metrics</span>.<span style="color:#a6e22e">forEach</span>((<span style="color:#a6e22e">metrics</span>, <span style="color:#a6e22e">endpoint</span>) =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">summary</span>.<span style="color:#a6e22e">endpoints</span>.<span style="color:#a6e22e">push</span>({
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">endpoint</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">endpoint</span>,
</span></span><span style="display:flex;"><span>                ...<span style="color:#a6e22e">metrics</span>
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">summary</span>.<span style="color:#a6e22e">totalCalls</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">metrics</span>.<span style="color:#a6e22e">totalCalls</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">summary</span>.<span style="color:#a6e22e">totalErrors</span> <span style="color:#f92672">+=</span> (<span style="color:#a6e22e">metrics</span>.<span style="color:#a6e22e">totalCalls</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">metrics</span>.<span style="color:#a6e22e">successfulCalls</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">totalDuration</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">metrics</span>.<span style="color:#a6e22e">totalDuration</span>;
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">summary</span>.<span style="color:#a6e22e">averageResponseTime</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">summary</span>.<span style="color:#a6e22e">totalCalls</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span> 
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">?</span> <span style="color:#a6e22e">totalDuration</span> <span style="color:#f92672">/</span> <span style="color:#a6e22e">summary</span>.<span style="color:#a6e22e">totalCalls</span> 
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">summary</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Initialize API monitoring
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">apiMonitor</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">ApiMonitor</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Track API metrics periodically
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">setInterval</span>(() =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">metrics</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">apiMonitor</span>.<span style="color:#a6e22e">getEndpointMetrics</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">&#39;api_metrics_summary&#39;</span>, <span style="color:#a6e22e">metrics</span>);
</span></span><span style="display:flex;"><span>}, <span style="color:#ae81ff">60000</span>); <span style="color:#75715e">// Every minute
</span></span></span></code></pre></div><h3 id="performance-monitoring-setup">Performance Monitoring Setup</h3>
<h4 id="comprehensive-performance-monitoring">Comprehensive Performance Monitoring</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// Comprehensive performance monitoring setup
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">PerformanceMonitor</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">constructor</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">setupCoreWebVitals</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">setupCustomMetrics</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">setupResourceMonitoring</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">setupNavigationTiming</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">setupCoreWebVitals</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// LCP monitoring
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">lcpObserver</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">PerformanceObserver</span>((<span style="color:#a6e22e">list</span>) =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">entries</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">list</span>.<span style="color:#a6e22e">getEntries</span>();
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">lastEntry</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">entries</span>[<span style="color:#a6e22e">entries</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>];
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">&#39;core_web_vital_lcp&#39;</span>, {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">lastEntry</span>.<span style="color:#a6e22e">startTime</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">element</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">lastEntry</span>.<span style="color:#a6e22e">element</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">tagName</span> <span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;unknown&#39;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">url</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">lastEntry</span>.<span style="color:#a6e22e">url</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>()
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Alert on poor LCP
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">lastEntry</span>.<span style="color:#a6e22e">startTime</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">2500</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addError</span>(<span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">&#39;Poor LCP detected&#39;</span>), {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">lcp_value</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">lastEntry</span>.<span style="color:#a6e22e">startTime</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">threshold</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2500</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">severity</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;warning&#39;</span>
</span></span><span style="display:flex;"><span>                });
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">lcpObserver</span>.<span style="color:#a6e22e">observe</span>({ <span style="color:#a6e22e">entryTypes</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;largest-contentful-paint&#39;</span>] });
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// FID monitoring
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">fidObserver</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">PerformanceObserver</span>((<span style="color:#a6e22e">list</span>) =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">list</span>.<span style="color:#a6e22e">getEntries</span>().<span style="color:#a6e22e">forEach</span>((<span style="color:#a6e22e">entry</span>) =&gt; {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">fidValue</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">processingStart</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">startTime</span>;
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">&#39;core_web_vital_fid&#39;</span>, {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">fidValue</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">target</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">target</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">tagName</span> <span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;unknown&#39;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>()
</span></span><span style="display:flex;"><span>                });
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// Alert on poor FID
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">fidValue</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">100</span>) {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addError</span>(<span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">&#39;Poor FID detected&#39;</span>), {
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">fid_value</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">fidValue</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">threshold</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">100</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">severity</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;warning&#39;</span>
</span></span><span style="display:flex;"><span>                    });
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">fidObserver</span>.<span style="color:#a6e22e">observe</span>({ <span style="color:#a6e22e">entryTypes</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;first-input&#39;</span>] });
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// CLS monitoring
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">clsValue</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">clsObserver</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">PerformanceObserver</span>((<span style="color:#a6e22e">list</span>) =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">list</span>.<span style="color:#a6e22e">getEntries</span>().<span style="color:#a6e22e">forEach</span>((<span style="color:#a6e22e">entry</span>) =&gt; {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">hadRecentInput</span>) {
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">sessionValue</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">value</span>;
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">sessionValue</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">clsValue</span>;
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">clsValue</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">sessionValue</span>;
</span></span><span style="display:flex;"><span>                    
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">&#39;core_web_vital_cls&#39;</span>, {
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">value</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">cumulative_value</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">clsValue</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">sources</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">sources</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">||</span> <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>()
</span></span><span style="display:flex;"><span>                    });
</span></span><span style="display:flex;"><span>                    
</span></span><span style="display:flex;"><span>                    <span style="color:#75715e">// Alert on poor CLS
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">clsValue</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0.1</span>) {
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addError</span>(<span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">&#39;Poor CLS detected&#39;</span>), {
</span></span><span style="display:flex;"><span>                            <span style="color:#a6e22e">cls_value</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">clsValue</span>,
</span></span><span style="display:flex;"><span>                            <span style="color:#a6e22e">threshold</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0.1</span>,
</span></span><span style="display:flex;"><span>                            <span style="color:#a6e22e">severity</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;warning&#39;</span>
</span></span><span style="display:flex;"><span>                        });
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">clsObserver</span>.<span style="color:#a6e22e">observe</span>({ <span style="color:#a6e22e">entryTypes</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;layout-shift&#39;</span>] });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">setupCustomMetrics</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Custom performance metrics
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">measureTimeToInteractive</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">measureFirstPaint</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">measureDOMContentLoad</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">measureTimeToInteractive</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Approximate TTI measurement
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">observer</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">PerformanceObserver</span>((<span style="color:#a6e22e">list</span>) =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">list</span>.<span style="color:#a6e22e">getEntries</span>().<span style="color:#a6e22e">forEach</span>((<span style="color:#a6e22e">entry</span>) =&gt; {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">entryType</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;first-input&#39;</span>) {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">&#39;custom_metric_tti&#39;</span>, {
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">startTime</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>()
</span></span><span style="display:flex;"><span>                    });
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">observer</span>.<span style="color:#a6e22e">disconnect</span>();
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">observer</span>.<span style="color:#a6e22e">observe</span>({ <span style="color:#a6e22e">entryTypes</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;first-input&#39;</span>] });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">measureFirstPaint</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">fpObserver</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">PerformanceObserver</span>((<span style="color:#a6e22e">list</span>) =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">list</span>.<span style="color:#a6e22e">getEntries</span>().<span style="color:#a6e22e">forEach</span>((<span style="color:#a6e22e">entry</span>) =&gt; {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">&#39;custom_metric_fp&#39;</span>, {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">startTime</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>()
</span></span><span style="display:flex;"><span>                });
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">fpObserver</span>.<span style="color:#a6e22e">observe</span>({ <span style="color:#a6e22e">entryTypes</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;paint&#39;</span>] });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">measureDOMContentLoad</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">navigation</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">performance</span>.<span style="color:#a6e22e">getEntriesByType</span>(<span style="color:#e6db74">&#39;navigation&#39;</span>)[<span style="color:#ae81ff">0</span>];
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">navigation</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">&#39;custom_metric_dom_content_loaded&#39;</span>, {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">navigation</span>.<span style="color:#a6e22e">domContentLoadedEventEnd</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">navigation</span>.<span style="color:#a6e22e">domContentLoadedEventStart</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>()
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">setupResourceMonitoring</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">resourceObserver</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">PerformanceObserver</span>((<span style="color:#a6e22e">list</span>) =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">list</span>.<span style="color:#a6e22e">getEntries</span>().<span style="color:#a6e22e">forEach</span>((<span style="color:#a6e22e">entry</span>) =&gt; {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">duration</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">initiatorType</span>) {
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">resourceData</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">name</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">initiatorType</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">duration</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">duration</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">size</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">transferSize</span> <span style="color:#f92672">||</span> <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">cached</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">transferSize</span> <span style="color:#f92672">!==</span> <span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">decodedBodySize</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>()
</span></span><span style="display:flex;"><span>                    };
</span></span><span style="display:flex;"><span>                    
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">&#39;resource_load&#39;</span>, <span style="color:#a6e22e">resourceData</span>);
</span></span><span style="display:flex;"><span>                    
</span></span><span style="display:flex;"><span>                    <span style="color:#75715e">// Alert on slow resources
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">duration</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1000</span>) {
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addError</span>(<span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">`Slow resource: </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">name</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>), {
</span></span><span style="display:flex;"><span>                            <span style="color:#a6e22e">resource_name</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">name</span>,
</span></span><span style="display:flex;"><span>                            <span style="color:#a6e22e">resource_type</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">initiatorType</span>,
</span></span><span style="display:flex;"><span>                            <span style="color:#a6e22e">duration</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">entry</span>.<span style="color:#a6e22e">duration</span>,
</span></span><span style="display:flex;"><span>                            <span style="color:#a6e22e">threshold</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1000</span>,
</span></span><span style="display:flex;"><span>                            <span style="color:#a6e22e">severity</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;warning&#39;</span>
</span></span><span style="display:flex;"><span>                        });
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">resourceObserver</span>.<span style="color:#a6e22e">observe</span>({ <span style="color:#a6e22e">entryTypes</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;resource&#39;</span>] });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">setupNavigationTiming</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Monitor navigation timing phases
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">navigation</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">performance</span>.<span style="color:#a6e22e">getEntriesByType</span>(<span style="color:#e6db74">&#39;navigation&#39;</span>)[<span style="color:#ae81ff">0</span>];
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">navigation</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">timingMetrics</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">dns_lookup</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">navigation</span>.<span style="color:#a6e22e">domainLookupEnd</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">navigation</span>.<span style="color:#a6e22e">domainLookupStart</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">tcp_connect</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">navigation</span>.<span style="color:#a6e22e">connectEnd</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">navigation</span>.<span style="color:#a6e22e">connectStart</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">server_response</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">navigation</span>.<span style="color:#a6e22e">responseStart</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">navigation</span>.<span style="color:#a6e22e">requestStart</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">content_download</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">navigation</span>.<span style="color:#a6e22e">responseEnd</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">navigation</span>.<span style="color:#a6e22e">responseStart</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">dom_processing</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">navigation</span>.<span style="color:#a6e22e">domComplete</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">navigation</span>.<span style="color:#a6e22e">responseEnd</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">total_load_time</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">navigation</span>.<span style="color:#a6e22e">loadEventEnd</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">navigation</span>.<span style="color:#a6e22e">navigationStart</span>
</span></span><span style="display:flex;"><span>            };
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            Object.<span style="color:#a6e22e">entries</span>(<span style="color:#a6e22e">timingMetrics</span>).<span style="color:#a6e22e">forEach</span>(([<span style="color:#a6e22e">phase</span>, <span style="color:#a6e22e">duration</span>]) =&gt; {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">&#39;navigation_timing&#39;</span>, {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">phase</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">phase</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">duration</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">duration</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>()
</span></span><span style="display:flex;"><span>                });
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Custom performance measurement utility
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">startCustomTiming</span>(<span style="color:#a6e22e">name</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">name</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">startTime</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">performance</span>.<span style="color:#a6e22e">now</span>(),
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">end</span><span style="color:#f92672">:</span> () =&gt; {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">duration</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">performance</span>.<span style="color:#a6e22e">now</span>() <span style="color:#f92672">-</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">startTime</span>;
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">&#39;custom_timing&#39;</span>, {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">duration</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">duration</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>()
</span></span><span style="display:flex;"><span>                });
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">duration</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Initialize performance monitoring
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">performanceMonitor</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">PerformanceMonitor</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Example usage of custom timing
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">timing1</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">performanceMonitor</span>.<span style="color:#a6e22e">startCustomTiming</span>(<span style="color:#e6db74">&#39;user_registration&#39;</span>);
</span></span><span style="display:flex;"><span><span style="color:#75715e">// ... registration process ...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">timing1</span>.<span style="color:#a6e22e">end</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">timing2</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">performanceMonitor</span>.<span style="color:#a6e22e">startCustomTiming</span>(<span style="color:#e6db74">&#39;data_sync&#39;</span>);
</span></span><span style="display:flex;"><span><span style="color:#75715e">// ... data sync process ...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">timing2</span>.<span style="color:#a6e22e">end</span>();
</span></span></code></pre></div><h3 id="error-tracking-configuration">Error Tracking Configuration</h3>
<h4 id="comprehensive-error-tracking-1">Comprehensive Error Tracking</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// Comprehensive error tracking configuration
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ErrorTracker</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">constructor</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">setupGlobalErrorHandlers</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">setupUnhandledPromiseRejections</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">setupResourceErrorTracking</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">setupConsoleErrorTracking</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">errorCounts</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Map</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">lastAlertTime</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Map</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">setupGlobalErrorHandlers</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// JavaScript runtime errors
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        window.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;error&#39;</span>, (<span style="color:#a6e22e">event</span>) =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">trackError</span>({
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;javascript&#39;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">message</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">filename</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">filename</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">lineno</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">lineno</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">colno</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">colno</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">error</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">error</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>(),
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">userAgent</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">navigator</span>.<span style="color:#a6e22e">userAgent</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">url</span><span style="color:#f92672">:</span> window.<span style="color:#a6e22e">location</span>.<span style="color:#a6e22e">href</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">severity</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;error&#39;</span>
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">setupUnhandledPromiseRejections</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Unhandled promise rejections
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        window.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;unhandledrejection&#39;</span>, (<span style="color:#a6e22e">event</span>) =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">trackError</span>({
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;promise&#39;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">reason</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">message</span> <span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;Unhandled Promise Rejection&#39;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">reason</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">reason</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">stack</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">reason</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">stack</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>(),
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">userAgent</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">navigator</span>.<span style="color:#a6e22e">userAgent</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">url</span><span style="color:#f92672">:</span> window.<span style="color:#a6e22e">location</span>.<span style="color:#a6e22e">href</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">severity</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;error&#39;</span>
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">setupResourceErrorTracking</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Resource loading errors
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        window.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;error&#39;</span>, (<span style="color:#a6e22e">event</span>) =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">target</span> <span style="color:#f92672">&amp;&amp;</span> (
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">target</span>.<span style="color:#a6e22e">tagName</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;SCRIPT&#39;</span> <span style="color:#f92672">||</span>
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">target</span>.<span style="color:#a6e22e">tagName</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;LINK&#39;</span> <span style="color:#f92672">||</span>
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">target</span>.<span style="color:#a6e22e">tagName</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;IMG&#39;</span> <span style="color:#f92672">||</span>
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">target</span>.<span style="color:#a6e22e">tagName</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;VIDEO&#39;</span> <span style="color:#f92672">||</span>
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">target</span>.<span style="color:#a6e22e">tagName</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;AUDIO&#39;</span>
</span></span><span style="display:flex;"><span>            )) {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">trackError</span>({
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;resource&#39;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#e6db74">`Failed to load </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">target</span>.<span style="color:#a6e22e">tagName</span>.<span style="color:#a6e22e">toLowerCase</span>()<span style="color:#e6db74">}</span><span style="color:#e6db74">: </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">target</span>.<span style="color:#a6e22e">src</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">target</span>.<span style="color:#a6e22e">href</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">target</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">target</span>.<span style="color:#a6e22e">tagName</span>.<span style="color:#a6e22e">toLowerCase</span>(),
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">src</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">target</span>.<span style="color:#a6e22e">src</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">target</span>.<span style="color:#a6e22e">href</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>(),
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">url</span><span style="color:#f92672">:</span> window.<span style="color:#a6e22e">location</span>.<span style="color:#a6e22e">href</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">severity</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;warning&#39;</span>
</span></span><span style="display:flex;"><span>                });
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }, <span style="color:#66d9ef">true</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">setupConsoleErrorTracking</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Track console.error calls
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">originalConsoleError</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span> <span style="color:#f92672">=</span> (...<span style="color:#a6e22e">args</span>) =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">trackError</span>({
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;console_error&#39;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">args</span>.<span style="color:#a6e22e">join</span>(<span style="color:#e6db74">&#39; &#39;</span>),
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">args</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">args</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>(),
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">url</span><span style="color:#f92672">:</span> window.<span style="color:#a6e22e">location</span>.<span style="color:#a6e22e">href</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">severity</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;warning&#39;</span>
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Call original console.error
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">originalConsoleError</span>.<span style="color:#a6e22e">apply</span>(<span style="color:#a6e22e">console</span>, <span style="color:#a6e22e">args</span>);
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">trackError</span>(<span style="color:#a6e22e">errorData</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Generate error ID
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">id</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">generateErrorId</span>();
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Categorize error
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">category</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">categorizeError</span>(<span style="color:#a6e22e">errorData</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Calculate severity
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">severity</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">calculateSeverity</span>(<span style="color:#a6e22e">errorData</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Add context
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">context</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">userAgent</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">navigator</span>.<span style="color:#a6e22e">userAgent</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">viewport</span><span style="color:#f92672">:</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">${</span>window.<span style="color:#a6e22e">innerWidth</span><span style="color:#e6db74">}</span><span style="color:#e6db74">x</span><span style="color:#e6db74">${</span>window.<span style="color:#a6e22e">innerHeight</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">url</span><span style="color:#f92672">:</span> window.<span style="color:#a6e22e">location</span>.<span style="color:#a6e22e">href</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">referrer</span><span style="color:#f92672">:</span> document.<span style="color:#a6e22e">referrer</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>()
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Add user context if available
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (window.<span style="color:#a6e22e">currentUser</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">user</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> window.<span style="color:#a6e22e">currentUser</span>.<span style="color:#a6e22e">id</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">role</span><span style="color:#f92672">:</span> window.<span style="color:#a6e22e">currentUser</span>.<span style="color:#a6e22e">role</span>
</span></span><span style="display:flex;"><span>            };
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Track in DataDog
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">error</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">type</span><span style="color:#e6db74">}</span><span style="color:#e6db74">: </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">message</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">stack</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">stack</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">stack</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addError</span>(<span style="color:#a6e22e">error</span>, {
</span></span><span style="display:flex;"><span>            ...<span style="color:#a6e22e">errorData</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">error_category</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">category</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">error_severity</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">severity</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">error_count</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getErrorCount</span>(<span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">category</span>),
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">user_session</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">getInternalContext</span>()<span style="color:#f92672">?</span>.<span style="color:#a6e22e">sessionId</span>
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Rate limiting for alerts
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">checkAndAlert</span>(<span style="color:#a6e22e">errorData</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Log for development
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">process</span>.<span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">NODE_ENV</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;development&#39;</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#e6db74">&#39;Enhanced error tracked:&#39;</span>, <span style="color:#a6e22e">errorData</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">categorizeError</span>(<span style="color:#a6e22e">errorData</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">type</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;javascript&#39;</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">message</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#e6db74">&#39;NetworkError&#39;</span>) <span style="color:#f92672">||</span> 
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">message</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#e6db74">&#39;fetch&#39;</span>)) {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;network&#39;</span>;
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">message</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#e6db74">&#39;ReferenceError&#39;</span>)) {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;reference&#39;</span>;
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">message</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#e6db74">&#39;TypeError&#39;</span>)) {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;type&#39;</span>;
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">message</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#e6db74">&#39;SyntaxError&#39;</span>)) {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;syntax&#39;</span>;
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;runtime&#39;</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">type</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;resource&#39;</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">target</span> <span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;unknown&#39;</span>;
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">type</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;promise&#39;</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;async&#39;</span>;
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">type</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;console_error&#39;</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;debug&#39;</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;unknown&#39;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">calculateSeverity</span>(<span style="color:#a6e22e">errorData</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">severityMap</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">javascript</span><span style="color:#f92672">:</span> { <span style="color:#a6e22e">network</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;high&#39;</span>, <span style="color:#a6e22e">reference</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;medium&#39;</span>, <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;medium&#39;</span>, <span style="color:#a6e22e">runtime</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;low&#39;</span> },
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">resource</span><span style="color:#f92672">:</span> { <span style="color:#a6e22e">script</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;high&#39;</span>, <span style="color:#a6e22e">css</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;medium&#39;</span>, <span style="color:#a6e22e">img</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;low&#39;</span> },
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">promise</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;medium&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">console_error</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;low&#39;</span>
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">severityMap</span>[<span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">type</span>]<span style="color:#f92672">?</span>.[<span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">category</span>] <span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;low&#39;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">getErrorCount</span>(<span style="color:#a6e22e">category</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">count</span> <span style="color:#f92672">=</span> (<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">errorCounts</span>.<span style="color:#a6e22e">get</span>(<span style="color:#a6e22e">category</span>) <span style="color:#f92672">||</span> <span style="color:#ae81ff">0</span>) <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">errorCounts</span>.<span style="color:#a6e22e">set</span>(<span style="color:#a6e22e">category</span>, <span style="color:#a6e22e">count</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">count</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">checkAndAlert</span>(<span style="color:#a6e22e">errorData</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">alertKey</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">type</span><span style="color:#e6db74">}</span><span style="color:#e6db74">:</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">category</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">now</span> <span style="color:#f92672">=</span> Date.<span style="color:#a6e22e">now</span>();
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Check if we should alert (rate limit to once per 5 minutes)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">lastAlert</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">lastAlertTime</span>.<span style="color:#a6e22e">get</span>(<span style="color:#a6e22e">alertKey</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">lastAlert</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">now</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">lastAlert</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">300000</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">errorCount</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">errorCounts</span>.<span style="color:#a6e22e">get</span>(<span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">category</span>) <span style="color:#f92672">||</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Alert on high error counts
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">errorCount</span> <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">10</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addError</span>(<span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">`High error rate: </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">category</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>), {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">alert_type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;high_error_rate&#39;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">category</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">errorData</span>.<span style="color:#a6e22e">category</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">error_count</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">errorCount</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">time_window</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;5_minutes&#39;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">severity</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;critical&#39;</span>
</span></span><span style="display:flex;"><span>                });
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">lastAlertTime</span>.<span style="color:#a6e22e">set</span>(<span style="color:#a6e22e">alertKey</span>, <span style="color:#a6e22e">now</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">generateErrorId</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">`err_</span><span style="color:#e6db74">${</span>Date.<span style="color:#a6e22e">now</span>()<span style="color:#e6db74">}</span><span style="color:#e6db74">_</span><span style="color:#e6db74">${</span>Math.<span style="color:#a6e22e">random</span>().<span style="color:#a6e22e">toString</span>(<span style="color:#ae81ff">36</span>).<span style="color:#a6e22e">substr</span>(<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">9</span>)<span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">getErrorSummary</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">summary</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">totalErrors</span><span style="color:#f92672">:</span> Array.<span style="color:#a6e22e">from</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">errorCounts</span>.<span style="color:#a6e22e">values</span>()).<span style="color:#a6e22e">reduce</span>((<span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">b</span>) =&gt; <span style="color:#a6e22e">a</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">b</span>, <span style="color:#ae81ff">0</span>),
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">byCategory</span><span style="color:#f92672">:</span> {},
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">byType</span><span style="color:#f92672">:</span> {},
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">trends</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">analyzeErrorTrends</span>()
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">errorCounts</span>.<span style="color:#a6e22e">forEach</span>((<span style="color:#a6e22e">count</span>, <span style="color:#a6e22e">key</span>) =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> [<span style="color:#a6e22e">type</span>, <span style="color:#a6e22e">category</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">key</span>.<span style="color:#a6e22e">split</span>(<span style="color:#e6db74">&#39;:&#39;</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">summary</span>.<span style="color:#a6e22e">byCategory</span>[<span style="color:#a6e22e">category</span>]) {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">summary</span>.<span style="color:#a6e22e">byCategory</span>[<span style="color:#a6e22e">category</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">summary</span>.<span style="color:#a6e22e">byType</span>[<span style="color:#a6e22e">type</span>]) {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">summary</span>.<span style="color:#a6e22e">byType</span>[<span style="color:#a6e22e">type</span>] <span style="color:#f92672">=</span> {};
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">summary</span>.<span style="color:#a6e22e">byCategory</span>[<span style="color:#a6e22e">category</span>] <span style="color:#f92672">+=</span> <span style="color:#a6e22e">count</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">summary</span>.<span style="color:#a6e22e">byType</span>[<span style="color:#a6e22e">type</span>][<span style="color:#a6e22e">category</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">count</span>;
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">summary</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">analyzeErrorTrends</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Analyze error patterns
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">totalErrors</span> <span style="color:#f92672">=</span> Array.<span style="color:#a6e22e">from</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">errorCounts</span>.<span style="color:#a6e22e">values</span>()).<span style="color:#a6e22e">reduce</span>((<span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">b</span>) =&gt; <span style="color:#a6e22e">a</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">b</span>, <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">mostCommon</span> <span style="color:#f92672">=</span> Array.<span style="color:#a6e22e">from</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">errorCounts</span>.<span style="color:#a6e22e">entries</span>())
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">sort</span>((<span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">b</span>) =&gt; <span style="color:#a6e22e">b</span>[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">-</span> <span style="color:#a6e22e">a</span>[<span style="color:#ae81ff">1</span>])[<span style="color:#ae81ff">0</span>];
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">totalErrors</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">totalErrors</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">mostCommonError</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">mostCommon</span> <span style="color:#f92672">?</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">category</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">mostCommon</span>[<span style="color:#ae81ff">0</span>],
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">count</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">mostCommon</span>[<span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>            } <span style="color:#f92672">:</span> <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">errorRate</span><span style="color:#f92672">:</span> Math.<span style="color:#a6e22e">round</span>((<span style="color:#a6e22e">totalErrors</span> <span style="color:#f92672">/</span> (<span style="color:#ae81ff">5</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">60</span>)) <span style="color:#f92672">*</span> <span style="color:#ae81ff">60</span>), <span style="color:#75715e">// errors per hour
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">averageErrorCount</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">totalErrors</span> <span style="color:#f92672">/</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">errorCounts</span>.<span style="color:#a6e22e">size</span>
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Initialize error tracking
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">errorTracker</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">ErrorTracker</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Track error summary periodically
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">setInterval</span>(() =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">summary</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">errorTracker</span>.<span style="color:#a6e22e">getErrorSummary</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">&#39;error_summary&#39;</span>, <span style="color:#a6e22e">summary</span>);
</span></span><span style="display:flex;"><span>}, <span style="color:#ae81ff">300000</span>); <span style="color:#75715e">// Every 5 minutes
</span></span></span></code></pre></div><h2 id="best-practices">Best Practices</h2>
<h3 id="datadog-rum-optimization">DataDog RUM Optimization</h3>
<h4 id="performance-optimization">Performance Optimization</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// DataDog RUM optimization best practices
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DataDogOptimizer</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">constructor</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">optimizationConfig</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Sampling rates optimization
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">sampling</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">development</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">sessionSampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">100</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">sessionReplaySampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">100</span>
</span></span><span style="display:flex;"><span>                },
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">staging</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">sessionSampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">50</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">sessionReplaySampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">20</span>
</span></span><span style="display:flex;"><span>                },
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">production</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">sessionSampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">10</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">sessionReplaySampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Data collection optimization
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">collection</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">maxEventsPerSession</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1000</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">maxResourceEntries</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">500</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">maxActionEntries</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">200</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">flushInterval</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">30000</span> <span style="color:#75715e">// 30 seconds
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            },
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Privacy optimization
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">privacy</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">maskUserInput</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">maskSensitiveRoutes</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">excludeInternalTraffic</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">optimizeDataCollection</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Configure optimal data collection
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">init</span>({
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// ... other config ...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">sessionSampleRate</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getSessionSampleRate</span>(),
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">sessionReplaySampleRate</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getSessionReplaySampleRate</span>(),
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Control data volume
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">beforeSend</span><span style="color:#f92672">:</span> (<span style="color:#a6e22e">event</span>) =&gt; {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">filterEvent</span>(<span style="color:#a6e22e">event</span>);
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Optimize resource tracking
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">trackResources</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">resourceSampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">50</span>, <span style="color:#75715e">// Sample 50% of resources
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Optimize action tracking
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">trackUserInteractions</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">defaultPrivacyLevel</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;mask-user-input&#39;</span>
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">getSessionSampleRate</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">environment</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getEnvironment</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">optimizationConfig</span>.<span style="color:#a6e22e">sampling</span>[<span style="color:#a6e22e">environment</span>].<span style="color:#a6e22e">sessionSampleRate</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">getSessionReplaySampleRate</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">environment</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getEnvironment</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">optimizationConfig</span>.<span style="color:#a6e22e">sampling</span>[<span style="color:#a6e22e">environment</span>].<span style="color:#a6e22e">sessionReplaySampleRate</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">filterEvent</span>(<span style="color:#a6e22e">event</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Filter out unnecessary events to reduce data volume
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Skip events during development that aren&#39;t useful
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">isDevelopment</span>() <span style="color:#f92672">&amp;&amp;</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">isDevelopmentEvent</span>(<span style="color:#a6e22e">event</span>)) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Skip resource events for small resources
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">type</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;resource&#39;</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">resource</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">size</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">1000</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Skip action events for non-meaningful interactions
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">type</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;action&#39;</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">isMeaninglessAction</span>(<span style="color:#a6e22e">event</span>)) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Limit error events to prevent spam
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">type</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;error&#39;</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">isDuplicateError</span>(<span style="color:#a6e22e">event</span>)) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">isDevelopmentEvent</span>(<span style="color:#a6e22e">event</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Filter development-specific events
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">devEvents</span> <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;webpack&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;hot-reload&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;source-map&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;localhost&#39;</span>
</span></span><span style="display:flex;"><span>        ];
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">devEvents</span>.<span style="color:#a6e22e">some</span>(<span style="color:#a6e22e">pattern</span> =&gt; 
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">resource</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">url</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#a6e22e">pattern</span>) <span style="color:#f92672">||</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">error</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">message</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#a6e22e">pattern</span>)
</span></span><span style="display:flex;"><span>        );
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">isMeaninglessAction</span>(<span style="color:#a6e22e">event</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Filter out meaningless user actions
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">meaninglessActions</span> <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;scroll&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;mousemove&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;focus&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;blur&#39;</span>
</span></span><span style="display:flex;"><span>        ];
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">meaninglessActions</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">action</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">type</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">isDuplicateError</span>(<span style="color:#a6e22e">event</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Simple deduplication based on error message and stack
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">errorKey</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">error</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">message</span><span style="color:#e6db74">}</span><span style="color:#e6db74">:</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">error</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">stack</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">substring</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">100</span>)<span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">now</span> <span style="color:#f92672">=</span> Date.<span style="color:#a6e22e">now</span>();
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">lastErrorTime</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">lastErrorTime</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Map</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">lastTime</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">lastErrorTime</span>.<span style="color:#a6e22e">get</span>(<span style="color:#a6e22e">errorKey</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">lastTime</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">now</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">lastTime</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">5000</span>) { <span style="color:#75715e">// 5 second deduplication window
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">lastErrorTime</span>.<span style="color:#a6e22e">set</span>(<span style="color:#a6e22e">errorKey</span>, <span style="color:#a6e22e">now</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">getEnvironment</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">typeof</span> window <span style="color:#f92672">!==</span> <span style="color:#e6db74">&#39;undefined&#39;</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">hostname</span> <span style="color:#f92672">=</span> window.<span style="color:#a6e22e">location</span>.<span style="color:#a6e22e">hostname</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">hostname</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#e6db74">&#39;localhost&#39;</span>) <span style="color:#f92672">||</span> <span style="color:#a6e22e">hostname</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#e6db74">&#39;127.0.0.1&#39;</span>)) {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;development&#39;</span>;
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">hostname</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#e6db74">&#39;staging&#39;</span>)) {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;staging&#39;</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;production&#39;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">isDevelopment</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getEnvironment</span>() <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;development&#39;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">optimizeBundleSize</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Only import what you need from DataDog SDK
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">requiredImports</span> <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;@datadog/browser-rum&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;@datadog/browser-core&#39;</span>
</span></span><span style="display:flex;"><span>        ];
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;DataDog bundle optimization:&#39;</span>, {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">imports</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">requiredImports</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">treeShaking</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">deadCodeElimination</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">optimizeNetworkUsage</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Configure network optimization
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">setGlobalContext</span>({
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">network_optimization</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">compression_enabled</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">batch_size</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">50</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">flush_interval</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">30000</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Initialize optimization
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">optimizer</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">DataDogOptimizer</span>();
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">optimizer</span>.<span style="color:#a6e22e">optimizeDataCollection</span>();
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">optimizer</span>.<span style="color:#a6e22e">optimizeBundleSize</span>();
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">optimizer</span>.<span style="color:#a6e22e">optimizeNetworkUsage</span>();
</span></span></code></pre></div><h4 id="cost-management">Cost Management</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// Cost management strategies for DataDog RUM
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">CostManager</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">constructor</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">costConfig</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Sampling strategy for cost control
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">samplingStrategy</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// High-value pages get higher sampling
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#a6e22e">highValuePages</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">routes</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;/checkout&#39;</span>, <span style="color:#e6db74">&#39;/signup&#39;</span>, <span style="color:#e6db74">&#39;/dashboard&#39;</span>],
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">sessionSampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">100</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">sessionReplaySampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">20</span>
</span></span><span style="display:flex;"><span>                },
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// Low-value pages get lower sampling
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#a6e22e">lowValuePages</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">routes</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;/about&#39;</span>, <span style="color:#e6db74">&#39;/contact&#39;</span>, <span style="color:#e6db74">&#39;/terms&#39;</span>],
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">sessionSampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">10</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">sessionReplaySampleRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Data retention strategy
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">retentionStrategy</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">sessionReplay</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">highValue</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">30</span>,    <span style="color:#75715e">// 30 days for high-value sessions
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                    <span style="color:#a6e22e">standard</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">7</span>      <span style="color:#75715e">// 7 days for standard sessions
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">implementCostControl</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Dynamic sampling based on page value
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">samplingRate</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getDynamicSamplingRate</span>();
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">init</span>({
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// ... other config ...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">sessionSampleRate</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">samplingRate</span>.<span style="color:#a6e22e">session</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">sessionReplaySampleRate</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">samplingRate</span>.<span style="color:#a6e22e">replay</span>,
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Cost control in beforeSend
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">beforeSend</span><span style="color:#f92672">:</span> (<span style="color:#a6e22e">event</span>) =&gt; {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">costOptimizedFilter</span>(<span style="color:#a6e22e">event</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">getDynamicSamplingRate</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">currentPath</span> <span style="color:#f92672">=</span> window.<span style="color:#a6e22e">location</span>.<span style="color:#a6e22e">pathname</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">userValue</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getUserValue</span>();
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// High-value users get higher sampling
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">userValue</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;high&#39;</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> { <span style="color:#a6e22e">session</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">100</span>, <span style="color:#a6e22e">replay</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">20</span> };
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Check if current page is high value
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">isHighValuePage</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">costConfig</span>.<span style="color:#a6e22e">samplingStrategy</span>.<span style="color:#a6e22e">highValuePages</span>.<span style="color:#a6e22e">routes</span>
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">some</span>(<span style="color:#a6e22e">route</span> =&gt; <span style="color:#a6e22e">currentPath</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#a6e22e">route</span>));
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isHighValuePage</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> { <span style="color:#a6e22e">session</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">50</span>, <span style="color:#a6e22e">replay</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">10</span> };
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Default low sampling for cost control
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> { <span style="color:#a6e22e">session</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">5</span>, <span style="color:#a6e22e">replay</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span> };
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">getUserValue</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Determine user value based on behavior or account type
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (window.<span style="color:#a6e22e">currentUser</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">plan</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;enterprise&#39;</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;high&#39;</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Check for high-value behaviors
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">sessionData</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">getInternalContext</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">sessionData</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">user</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">lifetimeValue</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1000</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;high&#39;</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;standard&#39;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">costOptimizedFilter</span>(<span style="color:#a6e22e">event</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Filter events to reduce costs
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Skip resource events for non-critical resources
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">type</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;resource&#39;</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">isCriticalResource</span>(<span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">resource</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">url</span>)) {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> Math.<span style="color:#a6e22e">random</span>() <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0.1</span>; <span style="color:#75715e">// Only keep 10% of non-critical resources
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Skip action events during idle periods
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">type</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;action&#39;</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">isIdleAction</span>(<span style="color:#a6e22e">event</span>)) {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> Math.<span style="color:#a6e22e">random</span>() <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0.2</span>; <span style="color:#75715e">// Only keep 20% of idle actions
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Always keep error events (high value)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">type</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;error&#39;</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">isCriticalResource</span>(<span style="color:#a6e22e">url</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Define critical resources that should always be tracked
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">criticalPatterns</span> <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">/\.css$/</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">/main\./</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">/bundle\./</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">/runtime\./</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">/vendor\./</span>
</span></span><span style="display:flex;"><span>        ];
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">criticalPatterns</span>.<span style="color:#a6e22e">some</span>(<span style="color:#a6e22e">pattern</span> =&gt; <span style="color:#a6e22e">pattern</span>.<span style="color:#a6e22e">test</span>(<span style="color:#a6e22e">url</span>));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">isIdleAction</span>(<span style="color:#a6e22e">event</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Define idle actions that can be filtered
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">idleActions</span> <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;scroll&#39;</span>, <span style="color:#e6db74">&#39;mousemove&#39;</span>];
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">idleActions</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">action</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">type</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">monitorCostMetrics</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Track cost-related metrics
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">setInterval</span>(() =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">context</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">getInternalContext</span>();
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">&#39;cost_metrics&#39;</span>, {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">events_sent</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">context</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">eventCount</span> <span style="color:#f92672">||</span> <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">session_replay_enabled</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">context</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">sessionReplay</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">isEnabled</span> <span style="color:#f92672">||</span> <span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">sampling_rate</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getDynamicSamplingRate</span>(),
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">estimated_monthly_cost</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">estimateMonthlyCost</span>(),
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>()
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        }, <span style="color:#ae81ff">300000</span>); <span style="color:#75715e">// Every 5 minutes
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">estimateMonthlyCost</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Estimate monthly cost based on current usage
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">context</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">getInternalContext</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">eventsPerHour</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">context</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">eventCount</span> <span style="color:#f92672">/</span> (Date.<span style="color:#a6e22e">now</span>() <span style="color:#f92672">/</span> (<span style="color:#ae81ff">1000</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">60</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">60</span>));
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">estimatedEventsPerMonth</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">eventsPerHour</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">24</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">30</span>;
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// DataDog pricing (approximate)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">rumEventCost</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.000015</span>; <span style="color:#75715e">// $15 per million events
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">replayCost</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.001</span>; <span style="color:#75715e">// $1 per session replay
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">estimatedCost</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">estimatedEventsPerMonth</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">rumEventCost</span>;
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">estimatedEventsPerMonth</span><span style="color:#f92672">:</span> Math.<span style="color:#a6e22e">round</span>(<span style="color:#a6e22e">estimatedEventsPerMonth</span>),
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">estimatedCostPerMonth</span><span style="color:#f92672">:</span> Math.<span style="color:#a6e22e">round</span>(<span style="color:#a6e22e">estimatedCost</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">100</span>) <span style="color:#f92672">/</span> <span style="color:#ae81ff">100</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">costBreakdown</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">rumEvents</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">estimatedCost</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">0.8</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">sessionReplay</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">estimatedCost</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">0.2</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">setCostAlerts</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Set up cost alerts
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">costAlertConfig</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">monthlyBudget</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">100</span>, <span style="color:#75715e">// $100 monthly budget
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">warningThreshold</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0.8</span>, <span style="color:#75715e">// Alert at 80% of budget
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">criticalThreshold</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0.9</span> <span style="color:#75715e">// Alert at 90% of budget
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        };
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">setGlobalContext</span>({
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">cost_management</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">costAlertConfig</span>
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Monitor costs and alert when approaching budget
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">setInterval</span>(() =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">costMetrics</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">estimateMonthlyCost</span>();
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">budgetUsage</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">costMetrics</span>.<span style="color:#a6e22e">estimatedCostPerMonth</span> <span style="color:#f92672">/</span> <span style="color:#a6e22e">costAlertConfig</span>.<span style="color:#a6e22e">monthlyBudget</span>;
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">budgetUsage</span> <span style="color:#f92672">&gt;=</span> <span style="color:#a6e22e">costAlertConfig</span>.<span style="color:#a6e22e">criticalThreshold</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addError</span>(<span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">&#39;Monthly budget critical&#39;</span>), {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">budget_usage</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">budgetUsage</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">estimated_cost</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">costMetrics</span>.<span style="color:#a6e22e">estimatedCostPerMonth</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">monthly_budget</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">costAlertConfig</span>.<span style="color:#a6e22e">monthlyBudget</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">severity</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;critical&#39;</span>
</span></span><span style="display:flex;"><span>                });
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">budgetUsage</span> <span style="color:#f92672">&gt;=</span> <span style="color:#a6e22e">costAlertConfig</span>.<span style="color:#a6e22e">warningThreshold</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addError</span>(<span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">&#39;Monthly budget warning&#39;</span>), {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">budget_usage</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">budgetUsage</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">estimated_cost</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">costMetrics</span>.<span style="color:#a6e22e">estimatedCostPerMonth</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">monthly_budget</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">costAlertConfig</span>.<span style="color:#a6e22e">monthlyBudget</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">severity</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;warning&#39;</span>
</span></span><span style="display:flex;"><span>                });
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }, <span style="color:#ae81ff">3600000</span>); <span style="color:#75715e">// Check every hour
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Initialize cost management
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">costManager</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">CostManager</span>();
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">costManager</span>.<span style="color:#a6e22e">implementCostControl</span>();
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">costManager</span>.<span style="color:#a6e22e">monitorCostMetrics</span>();
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">costManager</span>.<span style="color:#a6e22e">setCostAlerts</span>();
</span></span></code></pre></div><h3 id="alert-configuration">Alert Configuration</h3>
<h4 id="effective-alerting-strategy">Effective Alerting Strategy</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// Comprehensive alert configuration
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">AlertManager</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">constructor</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">alertConfig</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Performance alerts
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">performance</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">coreWebVitals</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">lcp</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;LCP Performance Degradation&#34;</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">query</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;avg(last_5m):avg:rum.lcp{*} by {env,service} &gt; 2500&#34;</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;LCP is exceeding the performance threshold&#34;</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">tags</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;team:frontend&#34;</span>, <span style="color:#e6db74">&#34;severity:high&#34;</span>],
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">priority</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">timeout</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">900</span> <span style="color:#75715e">// 15 minutes
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                    },
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">fid</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;FID Performance Degradation&#34;</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">query</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;avg(last_5m):avg:rum.fid{*} by {env,service} &gt; 100&#34;</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;FID is exceeding the performance threshold&#34;</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">tags</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;team:frontend&#34;</span>, <span style="color:#e6db74">&#34;severity:high&#34;</span>],
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">priority</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">timeout</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">900</span>
</span></span><span style="display:flex;"><span>                    },
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">cls</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;CLS Performance Degradation&#34;</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">query</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;avg(last_5m):avg:rum.cls{*} by {env,service} &gt; 0.1&#34;</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;CLS is exceeding the performance threshold&#34;</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">tags</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;team:frontend&#34;</span>, <span style="color:#e6db74">&#34;severity:medium&#34;</span>],
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">priority</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">timeout</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1800</span> <span style="color:#75715e">// 30 minutes
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                    }
</span></span><span style="display:flex;"><span>                },
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">errorRate</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;High Error Rate&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">query</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;sum(last_5m):sum:rum.error{*} by {env,service} &gt; 100&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Error rate is critically high&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">tags</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;team:frontend&#34;</span>, <span style="color:#e6db74">&#34;severity:critical&#34;</span>],
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">priority</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">timeout</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">300</span> <span style="color:#75715e">// 5 minutes
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                },
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">apiPerformance</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;API Performance Degradation&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">query</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;avg(last_5m):avg:rum.resource.duration{type:fetch} by {env,service} &gt; 2000&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;API response times are too slow&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">tags</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;team:backend&#34;</span>, <span style="color:#e6db74">&#34;severity:medium&#34;</span>],
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">priority</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">timeout</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1800</span>
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Business metric alerts
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">business</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">conversion</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Conversion Rate Drop&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">query</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;sum(last_1h):sum:rum.action{action_type:conversion} by {env,service} &lt; 10&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Conversion rate has dropped significantly&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">tags</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;team:product&#34;</span>, <span style="color:#e6db74">&#34;severity:high&#34;</span>],
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">priority</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">timeout</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">3600</span> <span style="color:#75715e">// 1 hour
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                },
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">userEngagement</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Low User Engagement&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">query</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;sum(last_30m):sum:rum.view{*} by {env,service} &lt; 100&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;User engagement is below normal levels&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">tags</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;team:product&#34;</span>, <span style="color:#e6db74">&#34;severity:medium&#34;</span>],
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">priority</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">3</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">timeout</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1800</span>
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">configureAlerts</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Set up alerting rules
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Object.<span style="color:#a6e22e">values</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">alertConfig</span>.<span style="color:#a6e22e">performance</span>).<span style="color:#a6e22e">forEach</span>(<span style="color:#a6e22e">alertGroup</span> =&gt; {
</span></span><span style="display:flex;"><span>            Object.<span style="color:#a6e22e">values</span>(<span style="color:#a6e22e">alertGroup</span>).<span style="color:#a6e22e">forEach</span>(<span style="color:#a6e22e">alert</span> =&gt; {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">createAlert</span>(<span style="color:#a6e22e">alert</span>);
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        Object.<span style="color:#a6e22e">values</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">alertConfig</span>.<span style="color:#a6e22e">business</span>).<span style="color:#a6e22e">forEach</span>(<span style="color:#a6e22e">alert</span> =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">createAlert</span>(<span style="color:#a6e22e">alert</span>);
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">createAlert</span>(<span style="color:#a6e22e">alertConfig</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Create individual alert
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">&#39;alert_configured&#39;</span>, {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">alert_name</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">alertConfig</span>.<span style="color:#a6e22e">name</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">alert_query</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">alertConfig</span>.<span style="color:#a6e22e">query</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">alert_threshold</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">alertConfig</span>.<span style="color:#a6e22e">threshold</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">alert_severity</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">alertConfig</span>.<span style="color:#a6e22e">priority</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">alert_timeout</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">alertConfig</span>.<span style="color:#a6e22e">timeout</span>
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">setupAlertEscalation</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Set up alert escalation policies
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">escalationRules</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Critical alerts escalate immediately
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">critical</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">immediate</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;oncall@company.com&#39;</span>, <span style="color:#e6db74">&#39;manager@company.com&#39;</span>],
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">sms</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;+1234567890&#39;</span>, <span style="color:#e6db74">&#39;+0987654321&#39;</span>]
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// High priority alerts escalate after 15 minutes
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">high</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">delay</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">900</span>, <span style="color:#75715e">// 15 minutes
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#a6e22e">email</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;oncall@company.com&#39;</span>],
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">sms</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;+1234567890&#39;</span>]
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Medium priority alerts during business hours only
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">medium</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">businessHours</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">email</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;team@company.com&#39;</span>]
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">setGlobalContext</span>({
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">alert_escalation</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">escalationRules</span>
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">setupAlertRouting</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Route alerts to appropriate teams
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">routingRules</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">performance</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">core_web_vitals</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;frontend-team&#39;</span>],
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">error_rate</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;frontend-team&#39;</span>, <span style="color:#e6db74">&#39;backend-team&#39;</span>],
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">api_performance</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;backend-team&#39;</span>]
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">business</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">conversion</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;product-team&#39;</span>, <span style="color:#e6db74">&#39;growth-team&#39;</span>],
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">user_engagement</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;product-team&#39;</span>]
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">setGlobalContext</span>({
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">alert_routing</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">routingRules</span>
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">monitorAlertEffectiveness</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Monitor and optimize alert effectiveness
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">setInterval</span>(() =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">alertMetrics</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">totalAlerts</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getTotalAlerts</span>(),
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">alertResponseTime</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getAverageResponseTime</span>(),
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">falsePositiveRate</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getFalsePositiveRate</span>(),
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">alertFatigue</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getAlertFatigueScore</span>(),
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>()
</span></span><span style="display:flex;"><span>            };
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">&#39;alert_effectiveness&#39;</span>, <span style="color:#a6e22e">alertMetrics</span>);
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Optimize alerts based on effectiveness
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">optimizeAlerts</span>(<span style="color:#a6e22e">alertMetrics</span>);
</span></span><span style="display:flex;"><span>        }, <span style="color:#ae81ff">86400000</span>); <span style="color:#75715e">// Daily analysis
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">getTotalAlerts</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Calculate total alerts fired
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>; <span style="color:#75715e">// Would be calculated from DataDog metrics
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">getAverageResponseTime</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Calculate average alert response time
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">300</span>; <span style="color:#75715e">// Would be calculated from DataDog metrics
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">getFalsePositiveRate</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Calculate false positive rate
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0.05</span>; <span style="color:#75715e">// 5% false positive rate
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">getAlertFatigueScore</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Calculate alert fatigue score based on frequency and response
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">alertFrequency</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getTotalAlerts</span>() <span style="color:#f92672">/</span> <span style="color:#ae81ff">24</span>; <span style="color:#75715e">// per hour
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">responseRate</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.8</span>; <span style="color:#75715e">// 80% response rate
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> Math.<span style="color:#a6e22e">min</span>(<span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">alertFrequency</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">10</span> <span style="color:#f92672">*</span> (<span style="color:#ae81ff">1</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">responseRate</span>));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">optimizeAlerts</span>(<span style="color:#a6e22e">alertMetrics</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Optimize alerts based on effectiveness metrics
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">alertMetrics</span>.<span style="color:#a6e22e">falsePositiveRate</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0.1</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Too many false positives, adjust thresholds
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addError</span>(<span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">&#39;High false positive rate detected&#39;</span>), {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">current_rate</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">alertMetrics</span>.<span style="color:#a6e22e">falsePositiveRate</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">threshold</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0.1</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">recommendation</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Increase alert thresholds&#39;</span>
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">alertMetrics</span>.<span style="color:#a6e22e">alertFatigue</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0.7</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Alert fatigue detected, reduce frequency
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addError</span>(<span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">&#39;Alert fatigue detected&#39;</span>), {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">fatigue_score</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">alertMetrics</span>.<span style="color:#a6e22e">alertFatigue</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">threshold</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0.7</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">recommendation</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Reduce alert frequency or improve routing&#39;</span>
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">setupAlertTesting</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Set up alert testing and validation
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">testAlerts</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Test critical path alerts
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">criticalPath</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">lcp</span><span style="color:#f92672">:</span> () =&gt; <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">testLCPAlert</span>(),
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">errorRate</span><span style="color:#f92672">:</span> () =&gt; <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">testErrorRateAlert</span>(),
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">apiPerformance</span><span style="color:#f92672">:</span> () =&gt; <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">testAPIPerformanceAlert</span>()
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Test business metric alerts
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">businessMetrics</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">conversion</span><span style="color:#f92672">:</span> () =&gt; <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">testConversionAlert</span>(),
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">engagement</span><span style="color:#f92672">:</span> () =&gt; <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">testEngagementAlert</span>()
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Run alert tests weekly
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">setInterval</span>(() =&gt; {
</span></span><span style="display:flex;"><span>            Object.<span style="color:#a6e22e">values</span>(<span style="color:#a6e22e">testAlerts</span>.<span style="color:#a6e22e">criticalPath</span>).<span style="color:#a6e22e">forEach</span>(<span style="color:#a6e22e">test</span> =&gt; <span style="color:#a6e22e">test</span>());
</span></span><span style="display:flex;"><span>            Object.<span style="color:#a6e22e">values</span>(<span style="color:#a6e22e">testAlerts</span>.<span style="color:#a6e22e">businessMetrics</span>).<span style="color:#a6e22e">forEach</span>(<span style="color:#a6e22e">test</span> =&gt; <span style="color:#a6e22e">test</span>());
</span></span><span style="display:flex;"><span>        }, <span style="color:#ae81ff">604800000</span>); <span style="color:#75715e">// Weekly (7 days)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">testLCPAlert</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Test LCP alert by simulating poor performance
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">&#39;alert_test_lcp&#39;</span>, {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">test_type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;lcp_alert&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">simulated_lcp</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">3000</span>, <span style="color:#75715e">// Simulate poor LCP
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">threshold</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2500</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">result</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;should_trigger_alert&#39;</span>
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">testErrorRateAlert</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Test error rate alert
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">&#39;alert_test_error_rate&#39;</span>, {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">test_type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;error_rate_alert&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">simulated_errors</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">150</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">threshold</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">100</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">result</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;should_trigger_alert&#39;</span>
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">testAPIPerformanceAlert</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Test API performance alert
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">&#39;alert_test_api_performance&#39;</span>, {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">test_type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;api_performance_alert&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">simulated_response_time</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">3000</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">threshold</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2000</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">result</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;should_trigger_alert&#39;</span>
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">testConversionAlert</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Test conversion alert
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">&#39;alert_test_conversion&#39;</span>, {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">test_type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;conversion_alert&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">simulated_conversions</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">5</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">threshold</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">10</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">result</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;should_trigger_alert&#39;</span>
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">testEngagementAlert</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Test user engagement alert
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">&#39;alert_test_engagement&#39;</span>, {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">test_type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;engagement_alert&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">simulated_views</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">50</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">threshold</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">100</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">result</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;should_trigger_alert&#39;</span>
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Initialize alert management
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">alertManager</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">AlertManager</span>();
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">alertManager</span>.<span style="color:#a6e22e">configureAlerts</span>();
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">alertManager</span>.<span style="color:#a6e22e">setupAlertEscalation</span>();
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">alertManager</span>.<span style="color:#a6e22e">setupAlertRouting</span>();
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">alertManager</span>.<span style="color:#a6e22e">monitorAlertEffectiveness</span>();
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">alertManager</span>.<span style="color:#a6e22e">setupAlertTesting</span>();
</span></span></code></pre></div><h3 id="dashboard-maintenance">Dashboard Maintenance</h3>
<h4 id="dashboard-optimization-and-maintenance">Dashboard Optimization and Maintenance</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// Dashboard maintenance and optimization
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DashboardManager</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">constructor</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">dashboardConfig</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Dashboard refresh intervals
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">refreshIntervals</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">realTime</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">30</span>,      <span style="color:#75715e">// 30 seconds for critical metrics
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#a6e22e">nearRealTime</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">300</span>, <span style="color:#75715e">// 5 minutes for important metrics
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#a6e22e">hourly</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">3600</span>,      <span style="color:#75715e">// 1 hour for trend analysis
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#a6e22e">daily</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">86400</span>       <span style="color:#75715e">// 24 hours for long-term trends
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            },
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Widget organization
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">widgetGroups</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">performance</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;core_web_vitals&#39;</span>, <span style="color:#e6db74">&#39;api_performance&#39;</span>, <span style="color:#e6db74">&#39;resource_loading&#39;</span>],
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">userExperience</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;page_views&#39;</span>, <span style="color:#e6db74">&#39;user_interactions&#39;</span>, <span style="color:#e6db74">&#39;conversion_rates&#39;</span>],
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">errors</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;error_rates&#39;</span>, <span style="color:#e6db74">&#39;error_types&#39;</span>, <span style="color:#e6db74">&#39;error_trends&#39;</span>],
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">business</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;revenue_impact&#39;</span>, <span style="color:#e6db74">&#39;user_retention&#39;</span>, <span style="color:#e6db74">&#39;feature_adoption&#39;</span>]
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">optimizeDashboardPerformance</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Optimize dashboard loading and performance
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Use efficient queries
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">optimizedQueries</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Use aggregation for better performance
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">coreWebVitals</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;avg:rum.lcp{*} by {env,service}.rollup(300)&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">errorRate</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;sum:rum.error{*} by {env,service}.rollup(300)&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">pageViews</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;sum:rum.view{*} by {env,service}.rollup(300)&#34;</span>,
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Use sampling for high-volume metrics
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">userInteractions</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;sum:rum.action{*} by {env,service}.rollup(600).sample(10)&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">resourceLoading</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;avg:rum.resource.duration{*} by {env,service}.rollup(300)&#34;</span>
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Configure dashboard widgets with optimal refresh rates
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">widgets</span> <span style="color:#f92672">=</span> Object.<span style="color:#a6e22e">entries</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">dashboardConfig</span>.<span style="color:#a6e22e">widgetGroups</span>).<span style="color:#a6e22e">map</span>(([<span style="color:#a6e22e">group</span>, <span style="color:#a6e22e">widgets</span>]) =&gt; ({
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">group</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">group</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">refreshInterval</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getOptimalRefreshInterval</span>(<span style="color:#a6e22e">group</span>),
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">widgets</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">widgets</span>.<span style="color:#a6e22e">map</span>(<span style="color:#a6e22e">widget</span> =&gt; ({
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">widget</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">query</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">optimizedQueries</span>[<span style="color:#a6e22e">widget</span>],
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getWidgetType</span>(<span style="color:#a6e22e">widget</span>)
</span></span><span style="display:flex;"><span>            }))
</span></span><span style="display:flex;"><span>        }));
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">widgets</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">getOptimalRefreshInterval</span>(<span style="color:#a6e22e">group</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">intervals</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">performance</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">dashboardConfig</span>.<span style="color:#a6e22e">refreshIntervals</span>.<span style="color:#a6e22e">realTime</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">errors</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">dashboardConfig</span>.<span style="color:#a6e22e">refreshIntervals</span>.<span style="color:#a6e22e">realTime</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">userExperience</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">dashboardConfig</span>.<span style="color:#a6e22e">refreshIntervals</span>.<span style="color:#a6e22e">nearRealTime</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">business</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">dashboardConfig</span>.<span style="color:#a6e22e">refreshIntervals</span>.<span style="color:#a6e22e">hourly</span>
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">intervals</span>[<span style="color:#a6e22e">group</span>] <span style="color:#f92672">||</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">dashboardConfig</span>.<span style="color:#a6e22e">refreshIntervals</span>.<span style="color:#a6e22e">nearRealTime</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">getWidgetType</span>(<span style="color:#a6e22e">widgetName</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">widgetTypes</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">core_web_vitals</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;timeseries&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">api_performance</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;timeseries&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">resource_loading</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;timeseries&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">page_views</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;timeseries&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">user_interactions</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;query_table&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">conversion_rates</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;timeseries&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">error_rates</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;timeseries&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">error_types</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;toplist&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">error_trends</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;timeseries&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">revenue_impact</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;timeseries&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">user_retention</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;timeseries&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">feature_adoption</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;timeseries&#39;</span>
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">widgetTypes</span>[<span style="color:#a6e22e">widgetName</span>] <span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;timeseries&#39;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">implementDashboardAlerting</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Set up dashboard-specific alerts
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">dashboardAlerts</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Alert when dashboard widgets fail to load
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">widgetFailures</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Dashboard Widget Failure&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">condition</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;avg(last_5m):dashboard.widget.error{*} &gt; 0&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;One or more dashboard widgets are failing to load&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">severity</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;medium&#34;</span>
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Alert on data gaps
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">dataGaps</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Data Gap Detected&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">condition</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;avg(last_10m):rum.view{*} by {env,service} = 0&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;No data has been received for 10 minutes&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">severity</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;high&#34;</span>
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Alert on dashboard performance issues
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">dashboardPerformance</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Dashboard Performance Issue&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">condition</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;avg(last_5m):dashboard.load.time{*} &gt; 5000&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Dashboard is taking too long to load&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">severity</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;low&#34;</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">dashboardAlerts</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">setupDashboardHealthMonitoring</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Monitor dashboard health and performance
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">healthMetrics</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Track widget loading times
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">widgetLoadTimes</span><span style="color:#f92672">:</span> [],
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Track query performance
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">queryPerformance</span><span style="color:#f92672">:</span> [],
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Track data freshness
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">dataFreshness</span><span style="color:#f92672">:</span> [],
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Track user interactions
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">userInteractions</span><span style="color:#f92672">:</span> []
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Monitor widget performance
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">setInterval</span>(() =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">performanceMetrics</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>(),
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">averageWidgetLoadTime</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">calculateAverageWidgetLoadTime</span>(),
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">slowestWidget</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getSlowestWidget</span>(),
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">queryTimeouts</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getQueryTimeouts</span>(),
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">dataFreshness</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getDataFreshnessScore</span>()
</span></span><span style="display:flex;"><span>            };
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">&#39;dashboard_health&#39;</span>, <span style="color:#a6e22e">performanceMetrics</span>);
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Alert on performance issues
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">performanceMetrics</span>.<span style="color:#a6e22e">averageWidgetLoadTime</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">2000</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addError</span>(<span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">&#39;Dashboard performance degradation&#39;</span>), {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">average_load_time</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">performanceMetrics</span>.<span style="color:#a6e22e">averageWidgetLoadTime</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">threshold</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2000</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">slowest_widget</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">performanceMetrics</span>.<span style="color:#a6e22e">slowestWidget</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">severity</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;warning&#39;</span>
</span></span><span style="display:flex;"><span>                });
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">performanceMetrics</span>.<span style="color:#a6e22e">dataFreshness</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0.9</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addError</span>(<span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">&#39;Data freshness issue&#39;</span>), {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">freshness_score</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">performanceMetrics</span>.<span style="color:#a6e22e">dataFreshness</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">threshold</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0.9</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">timeout_count</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">performanceMetrics</span>.<span style="color:#a6e22e">queryTimeouts</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">severity</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;high&#39;</span>
</span></span><span style="display:flex;"><span>                });
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }, <span style="color:#ae81ff">300000</span>); <span style="color:#75715e">// Every 5 minutes
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">calculateAverageWidgetLoadTime</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Calculate average widget load time
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> Math.<span style="color:#a6e22e">random</span>() <span style="color:#f92672">*</span> <span style="color:#ae81ff">1000</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">500</span>; <span style="color:#75715e">// Mock implementation
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">getSlowestWidget</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Get the slowest performing widget
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> { <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;resource_analysis&#39;</span>, <span style="color:#a6e22e">loadTime</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">3000</span> };
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">getQueryTimeouts</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Get number of query timeouts
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> Math.<span style="color:#a6e22e">floor</span>(Math.<span style="color:#a6e22e">random</span>() <span style="color:#f92672">*</span> <span style="color:#ae81ff">10</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">getDataFreshnessScore</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Calculate data freshness score (0-1)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0.95</span>; <span style="color:#75715e">// Mock implementation
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">implementDashboardAutoScaling</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Automatically scale dashboard resources based on usage
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">autoScalingRules</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Scale based on concurrent users
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">concurrentUsers</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">threshold</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">10</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">action</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;increase_refresh_frequency&#39;</span>
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Scale based on data volume
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">dataVolume</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">threshold</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1000000</span>, <span style="color:#75715e">// 1M events per hour
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#a6e22e">action</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;enable_aggregation&#39;</span>
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Scale based on query complexity
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">queryComplexity</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">threshold</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1000</span>, <span style="color:#75715e">// 1 second average query time
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#a6e22e">action</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;simplify_queries&#39;</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Monitor scaling triggers
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">setInterval</span>(() =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">scalingMetrics</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">concurrentUsers</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getConcurrentUsers</span>(),
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">dataVolume</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getDataVolume</span>(),
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">queryComplexity</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getQueryComplexity</span>()
</span></span><span style="display:flex;"><span>            };
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            Object.<span style="color:#a6e22e">entries</span>(<span style="color:#a6e22e">autoScalingRules</span>).<span style="color:#a6e22e">forEach</span>(([<span style="color:#a6e22e">metric</span>, <span style="color:#a6e22e">rule</span>]) =&gt; {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">scalingMetrics</span>[<span style="color:#a6e22e">metric</span>] <span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">rule</span>.<span style="color:#a6e22e">threshold</span>) {
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">executeScalingAction</span>(<span style="color:#a6e22e">rule</span>.<span style="color:#a6e22e">action</span>, <span style="color:#a6e22e">scalingMetrics</span>[<span style="color:#a6e22e">metric</span>]);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        }, <span style="color:#ae81ff">600000</span>); <span style="color:#75715e">// Every 10 minutes
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">getConcurrentUsers</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Get number of concurrent dashboard users
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">5</span>; <span style="color:#75715e">// Mock implementation
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">getDataVolume</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Get current data volume
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">500000</span>; <span style="color:#75715e">// Mock implementation
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">getQueryComplexity</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Get average query execution time
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">500</span>; <span style="color:#75715e">// Mock implementation
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">executeScalingAction</span>(<span style="color:#a6e22e">action</span>, <span style="color:#a6e22e">currentValue</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Execute scaling action
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">actions</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">increase_refresh_frequency</span><span style="color:#f92672">:</span> () =&gt; {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">&#39;dashboard_scaling&#39;</span>, {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">action</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;increase_refresh_frequency&#39;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">reason</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;high_concurrent_users&#39;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">currentValue</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>()
</span></span><span style="display:flex;"><span>                });
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">enable_aggregation</span><span style="color:#f92672">:</span> () =&gt; {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">&#39;dashboard_scaling&#39;</span>, {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">action</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;enable_aggregation&#39;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">reason</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;high_data_volume&#39;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">currentValue</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>()
</span></span><span style="display:flex;"><span>                });
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">simplify_queries</span><span style="color:#f92672">:</span> () =&gt; {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">datadogRum</span>.<span style="color:#a6e22e">addAction</span>(<span style="color:#e6db74">&#39;dashboard_scaling&#39;</span>, {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">action</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;simplify_queries&#39;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">reason</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;high_query_complexity&#39;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">currentValue</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>()
</span></span><span style="display:flex;"><span>                });
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">executeAction</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">actions</span>[<span style="color:#a6e22e">action</span>];
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">executeAction</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">executeAction</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">setupDashboardDocumentation</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Set up dashboard documentation and onboarding
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">dashboardDocumentation</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Dashboard purpose and usage
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">purpose</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Website performance and user experience monitoring&#34;</span>,
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Widget descriptions
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">widgets</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">core_web_vitals</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">description</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Core Web Vitals performance metrics (LCP, FID, CLS)&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">usage</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Monitor page loading performance and user experience&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">thresholds</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">lcp</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Good: &lt; 2.5s, Needs Improvement: 2.5-4s, Poor: &gt; 4s&#34;</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">fid</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Good: &lt; 100ms, Needs Improvement: 100-300ms, Poor: &gt; 300ms&#34;</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">cls</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Good: &lt; 0.1, Needs Improvement: 0.1-0.25, Poor: &gt; 0.25&#34;</span>
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                },
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">error_rates</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">description</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;JavaScript and API error rates&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">usage</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Monitor application reliability and error trends&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">thresholds</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">error_rate</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Alert when error rate exceeds 5% of total requests&#34;</span>
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                },
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">user_engagement</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">description</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;User engagement and interaction metrics&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">usage</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Track user behavior and feature adoption&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">thresholds</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">page_views</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Monitor significant drops in user activity&#34;</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">conversion_rate</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Alert when conversion rate drops below expected levels&#34;</span>
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Alert procedures
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">alert_procedures</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">critical</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Immediate response required - page 24/7 oncall&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">high</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Response within 15 minutes - escalate to team lead&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">medium</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Response within 1 hour - standard business hours&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">low</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Response within 24 hours - next business day&#34;</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">dashboardDocumentation</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">scheduleDashboardMaintenance</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Schedule regular dashboard maintenance
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">maintenanceSchedule</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Daily maintenance
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">daily</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">time</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;02:00 AM&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">tasks</span><span style="color:#f92672">:</span> [
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;Verify data freshness&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;Check widget performance&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;Review alert effectiveness&#34;</span>
</span></span><span style="display:flex;"><span>                ]
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Weekly maintenance
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">weekly</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">time</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Sunday 03:00 AM&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">tasks</span><span style="color:#f92672">:</span> [
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;Update dashboard queries&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;Review and optimize widget configurations&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;Test alert functionality&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;Update documentation&#34;</span>
</span></span><span style="display:flex;"><span>                ]
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Monthly maintenance
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">monthly</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">time</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;1st of month 04:00 AM&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">tasks</span><span style="color:#f92672">:</span> [
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;Performance review and optimization&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;Cost analysis and optimization&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;User feedback analysis&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;Plan improvements for next month&#34;</span>
</span></span><span style="display:flex;"><span>                ]
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">maintenanceSchedule</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Initialize dashboard management
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">dashboardManager</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">DashboardManager</span>();
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">dashboardManager</span>.<span style="color:#a6e22e">optimizeDashboardPerformance</span>();
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">dashboardManager</span>.<span style="color:#a6e22e">implementDashboardAlerting</span>();
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">dashboardManager</span>.<span style="color:#a6e22e">setupDashboardHealthMonitoring</span>();
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">dashboardManager</span>.<span style="color:#a6e22e">implementDashboardAutoScaling</span>();
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">dashboardManager</span>.<span style="color:#a6e22e">setupDashboardDocumentation</span>();
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">dashboardManager</span>.<span style="color:#a6e22e">scheduleDashboardMaintenance</span>();
</span></span></code></pre></div><h2 id="conclusion">Conclusion</h2>
<p>DataDog Real User Monitoring (RUM) provides a comprehensive solution for website monitoring that eliminates the need for custom infrastructure while delivering deep insights into user experience and application performance. By following this guide, you can implement a robust monitoring system that scales with your application and provides actionable insights.</p>
<h3 id="key-takeaways">Key Takeaways</h3>
<ol>
<li><strong>Start with Core Web Vitals</strong>: Focus on LCP, FID, and CLS as your primary performance indicators</li>
<li><strong>Configure Smart Sampling</strong>: Use appropriate sampling rates to balance data collection with cost</li>
<li><strong>Set Up Meaningful Alerts</strong>: Configure alerts that provide actionable insights without alert fatigue</li>
<li><strong>Monitor Business Metrics</strong>: Track conversion rates and user engagement alongside technical metrics</li>
<li><strong>Optimize Continuously</strong>: Regularly review and optimize your monitoring setup based on usage patterns</li>
</ol>
<h3 id="next-steps">Next Steps</h3>
<ol>
<li><strong>Implement Gradually</strong>: Start with basic DataDog RUM setup and expand features over time</li>
<li><strong>Customize for Your Needs</strong>: Adapt the configurations and dashboards to your specific requirements</li>
<li><strong>Train Your Team</strong>: Ensure your team understands how to use and interpret the monitoring data</li>
<li><strong>Establish Processes</strong>: Create runbooks and procedures for responding to alerts and issues</li>
<li><strong>Measure ROI</strong>: Track the impact of monitoring on development velocity and user experience</li>
</ol>
<p>By leveraging DataDog RUM effectively, you&rsquo;ll gain comprehensive visibility into your website&rsquo;s performance and user experience, enabling you to proactively identify and resolve issues before they impact your users.</p>
<hr>
<p><em>This guide provides comprehensive coverage of DataDog RUM implementation for website monitoring. Remember to adapt the configurations and examples to your specific application requirements and DataDog subscription plan.</em></p>

      </div>

      <footer>
        


        
        
        
      </footer>
    </article>

    
  </section>

      </div>

      <footer class="footer">
  <section class="container">
    
    
      
        © 2019 - 2026
      
       Deskriders.dev 
    
    
       · 
      Powered by <a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>.
    
    
  </section>
</footer>

    </main>

    

  </body>

</html>
